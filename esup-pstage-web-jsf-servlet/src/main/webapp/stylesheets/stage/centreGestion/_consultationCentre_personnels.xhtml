<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="formListePersonnel" style="padding-top:15px;">
		<t:div rendered="#{centreController.listePersonnelVide}">
			<h:outputText value="#{msgs['CENTRE.PERSONNEL.LISTE.VIDE']}" />
		</t:div>
		<t:div rendered="#{!centreController.listePersonnelVide}">
			<p:dataTable id="listePersonnels"
				value="#{centreController.personnels}" var="personnel" rows="10"
				rowHover="true" rowStyleClass="nopointer" paginator="true"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,15,20">
				<p:column width="50" sortBy="#{personnel.civilite.libelle}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['CENTRE.PERSONNEL.CIVILITE']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.civilite.libelle}" />
					</t:htmlTag>
				</p:column>
				<p:column sortBy="#{personnel.nom}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['CENTRE.PERSONNEL.NOM']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.nom}" />
					</t:htmlTag>
				</p:column>
				<p:column sortBy="#{personnel.prenom}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['CENTRE.PERSONNEL.PRENOM']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.prenom}" />
					</t:htmlTag>
				</p:column>
				<p:column sortBy="#{personnel.affectation.libelle}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['CENTRE.PERSONNEL.COMPOSANTE']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.affectation.libelle}" />
					</t:htmlTag>
				</p:column>
				<p:column sortBy="#{personnel.droitAdmin.libelle}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['CENTRE.PERSONNEL.AJOUT.DROIT']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.droitAdmin.libelle}" />
					</t:htmlTag>
				</p:column>
				<p:column sortBy="#{personnel.alertesMail}">
					<f:facet name="header">
						<h:outputText value="#{msgs['CENTRE.PERSONNEL.ALERTES_MAIL']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText rendered="#{personnel.alertesMail}"
							value="#{msgs['FORM.OUI']}" />
						<h:outputText rendered="#{!personnel.alertesMail}"
							value="#{msgs['FORM.NON']}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msgs['CENTRE.PERSONNEL.DROIT_EVALUATION']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText rendered="#{personnel.droitEvaluationEtudiant}"
							value="Etudiants" style="display:block;"/>
						<h:outputText rendered="#{personnel.droitEvaluationEnseignant}"
							value="Enseignants" style="display:block;" />
						<h:outputText rendered="#{personnel.droitEvaluationEntreprise}"
							value="Entreprises" style="display:block;"/>
						<h:outputText style="display:block;"
							rendered="#{!personnel.droitEvaluationEtudiant
								and !personnel.droitEvaluationEnseignant
								and !personnel.droitEvaluationEntreprise}"
							value="Aucun" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText
							value="#{msgs['CENTRE.PERSONNEL.ACTIONS']}" />
					</f:facet>
					<t:htmlTag value="center">
						<p:commandLink id="see"
							oncomplete="PF('detailPersonnel').show();"
							update="detailPersonnel">
							<f:setPropertyActionListener value="#{personnel}"
								target="#{centreController.personnel}" />
							<h:graphicImage alt="#{msgs['FORM.CONSULTER']}"
								value="/media/images/zoom.png" />
							<p:tooltip for="see" value="#{msgs['FORM.CONSULTER']}" />
						</p:commandLink>

						<p:commandLink id="delete"
							rendered="#{welcomeController.superAdmin
							|| sessionController.droitsAccesMap[centreController.centre.idCentreGestion] == beanUtils.droitAdmin}"
							oncomplete="PF('suppressionPersonnel').show();"
							update="suppressionPersonnel" style="padding-left:5px;">
							<f:setPropertyActionListener value="#{personnel}"
								target="#{centreController.personnel}" />
							<h:graphicImage alt="#{msgs['FORM.SUPPRIMER']}"
								value="/media/images/delete.png" />
							<p:tooltip for="delete" value="#{msgs['FORM.SUPPRIMER']}" />
						</p:commandLink>
					</t:htmlTag>
				</p:column>
			</p:dataTable>
		</t:div>

		<t:htmlTag value="div" style="height:20px;" />

		<t:htmlTag value="center">
			<p:commandButton id="add"
				value="#{msgs['CENTRE.PERSONNEL.RATTACHER']}"
				action="#{centreController.avantRecherchePersonnel}"
				oncomplete="PF('recherchePersonnel').show();"
				style="font-size:16px; font-weight:bold; border-color:green;"
				rendered="#{welcomeController.superAdmin
				|| sessionController.droitsAccesMap[centreController.centre.idCentreGestion] == beanUtils.droitAdmin}"
				update="formRecherchePersonnel">
				<f:setPropertyActionListener value="#{false}" target="#{centreController.rechercheViseur}" />
			</p:commandButton>
		</t:htmlTag>
		<p:messages />
		<t:htmlTag value="div" style="height:20px;" />
	</h:form>
	<ui:include src="./_panel_detailPersonnel.xhtml" />
	<ui:include src="./_panel_recherchePersonnel.xhtml" />
	<ui:include src="./_panel_ajoutPersonnel.xhtml" />
	<ui:include src="./_panel_modifPersonnel.xhtml" />
	<ui:include src="./_panel_suppressionPersonnel.xhtml" />
</ui:composition>