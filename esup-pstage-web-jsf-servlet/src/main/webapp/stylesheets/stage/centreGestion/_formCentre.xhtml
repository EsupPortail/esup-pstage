<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:p="http://primefaces.org/ui">
    <h:panelGrid columns="2" style="font-weight:bold;">
        <h:graphicImage id="imgInfoAccueil"
                        alt="#{msgs['CENTRE.AJOUT_CENTRE.ACCUEIL']}"
                        value="/media/images/information.png" />
        <h:outputText value="#{msgs['CENTRE.AJOUT_CENTRE.ACCUEIL']}" />
    </h:panelGrid>

    <t:htmlTag value="div" style="height: 15px;" />

    <ui:include src="../../_commun/_champsObligatoires.xhtml" />

    <h:panelGrid columns="3">
        <t:div id="divNom">
            <h:panelGrid columns="2">
                <p:outputLabel value="#{msgs['CENTRE.NOM']}" for="nomCentre" />
                <p:message for="nomCentre" />
            </h:panelGrid>
            <p:inputText id="nomCentre" style="text-transform:uppercase;"
                         value="#{centreController.centre.nomCentre}" size="50"
                         maxlength="100" required="true"
                         requiredMessage="#{requiredMessageController.champObligatoire}">
                <f:converter binding="#{sansAccentEnMAJConverter}" />
                <p:ajax event="blur" update="divNom" />
            </p:inputText>
        </t:div>

        <p:separator style="height:60px; margin-left:30px; margin-right:30px;" />

        <t:div>
            <p:outputLabel value="#{msgs['CENTRE.TYPE_CENTRE']}"
                           for="critereGestion" />
            <br/>
            <p:selectOneMenu id="critereGestion" style="margin:5px;"
                             value="#{centreController.centre.niveauCentre}"
                             converter="#{niveauCentreConverter}" required="true"
                             requiredMessage="#{requiredMessageController.champObligatoire}"
                             effect="none">
                <f:selectItems value="#{centreController.niveauxCentre}" />
            </p:selectOneMenu>
        </t:div>
    </h:panelGrid>

    <t:htmlTag value="div" style="height: 10px;" />

    <t:fieldset>
        <legend>
            <h:outputText value="#{msgs['CENTRE.COORDONNEES']}" />
        </legend>
        <h:panelGrid columns="3">
            <t:htmlTag id="panelVoie" value="ul" styleClass="formUL">
                <t:htmlTag value="li">
                    <h:panelGrid columns="2">
                        <p:outputLabel value="#{msgs['CENTRE.VOIE']}" for="voie" />
                        <p:message for="voie" />
                    </h:panelGrid>
                    <p:inputText id="voie" value="#{centreController.centre.voie}"
                                 size="50" maxlength="200" required="true"
                                 requiredMessage="#{requiredMessageController.champObligatoire}">
                        <p:ajax event="blur" update="panelVoie" />
                    </p:inputText>
                </t:htmlTag>

                <t:htmlTag value="li">
                    <p:outputLabel value="#{msgs['CENTRE.BATIMENT_RESIDENCE']}"
                                   for="batimentResidence" />
                    <p:inputText id="batimentResidence"
                                 value="#{centreController.centre.batimentResidence}" size="50"
                                 maxlength="200" />
                </t:htmlTag>
            </t:htmlTag>

            <p:separator style="height:130px; margin-left:30px; margin-right:30px;" />

            <t:div>
                <h:panelGrid id="panelCodePostal" columns="2">
                    <p:outputLabel value="#{msgs['CENTRE.CODE_POSTAL']}"
                                   for="codePostal" />
                    <p:message for="codePostal" />
                </h:panelGrid>
                <p:inputText id="codePostal"
                             value="#{centreController.centre.codePostal}" size="20"
                             maxlength="10" required="true"
                             requiredMessage="#{requiredMessageController.champObligatoire}">
                    <p:ajax event="blur" update="panelCodePostal,codePostal" />
                </p:inputText>

                <h:panelGrid id="panelCommune" columns="2">
                    <p:outputLabel value="#{msgs['CENTRE.COMMUNE']}" for="commune" />
                    <p:message for="commune" />
                </h:panelGrid>
                <p:inputText id="commune" style="text-transform:uppercase;"
                             value="#{centreController.centre.commune}" size="50"
                             maxlength="200" required="true"
                             requiredMessage="#{requiredMessageController.champObligatoire}">
                    <p:ajax event="blur" update="panelCommune,commune" />
                </p:inputText>
            </t:div>
        </h:panelGrid>
        <h:panelGrid columns="3">
            <h:panelGrid id="panelWeb">
                <h:panelGrid columns="2">
                    <p:outputLabel value="#{msgs['CENTRE.MAIL']} " for="mail" />
                    <h:outputText value="#{msgs['CONTACT.MAIL.AIDE']}" escape="false" />
                </h:panelGrid>
                <p:inputText id="mail" value="#{centreController.centre.mail}"
                             size="50"
                             validatorMessage="#{requiredMessageController.adresseMailNonValide}"
                             maxlength="50">
                    <f:validator binding="#{mailValidator}" />
                    <p:ajax event="blur" update="panelWeb" />
                </p:inputText>
                <p:message for="mail" />
                <h:panelGrid columns="2">
                    <p:outputLabel value="#{msgs['CENTRE.SITEWEB']} " for="siteWeb" />
                    <h:outputText value="#{msgs['STRUCTURE.SITEWEB.AIDE']}"
                                  escape="false" />
                </h:panelGrid>
                <p:inputText id="siteWeb" value="#{centreController.centre.siteWeb}"
                             size="50"
                             validatorMessage="#{requiredMessageController.siteWebNonValide}"
                             maxlength="200">
                    <f:validator binding="#{siteWebValidator}" />
                    <p:ajax event="blur" update="panelWeb" />
                </p:inputText>
                <p:message for="siteWeb" />
            </h:panelGrid>

            <p:separator style="height:150px; margin-left:30px; margin-right:30px;" />

            <h:panelGrid id="panelTel">
                <h:panelGrid columns="2">
                    <p:outputLabel value="#{msgs['CENTRE.TEL']}" for="telephone" />
                    <p:message for="telephone" />
                </h:panelGrid>
                <p:inputText id="telephone"
                             value="#{centreController.centre.telephone}" size="20"
                             maxlength="20" required="true"
                             requiredMessage="#{requiredMessageController.champObligatoire}">
                    <p:ajax event="blur" update="panelTel" />
                </p:inputText>

                <h:outputLabel value="#{msgs['CENTRE.FAX']} " for="fax" />
                <p:inputText id="fax" value="#{centreController.centre.fax}"
                             size="20" maxlength="20" />
            </h:panelGrid>
        </h:panelGrid>
    </t:fieldset>

    <t:htmlTag value="div" style="height: 10px;" />

    <t:fieldset>
        <legend>
            <h:outputText value="#{msgs['CENTRE.PARAMETRAGE']}" />
        </legend>

        <h:panelGrid rendered="#{centreController.confidentialiteAffichable}">
            <t:htmlTag value="div" style="height: 5px;" />

            <p:outputLabel value="#{msgs['CENTRE.CONFIDENTIALITE']}"
                           for="confidentialite" />
            <h:panelGrid>
                <h:selectOneMenu id="confidentialite"
                                 value="#{centreController.centre.confidentialite}" required="true"
                                 converter="#{confidentialiteConverter}"
                                 requiredMessage="#{requiredMessageController.champObligatoire}">
                    <f:selectItems value="#{centreController.confidentialites}" />
                </h:selectOneMenu>
            </h:panelGrid>
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 5px;" />

        <h:panelGrid columns="2">
            <p:selectBooleanCheckbox id="tuteurEnsObligatoire"
                                     value="#{centreController.centre.presenceTuteurEns}" />
            <h:outputLabel value="#{msgs['CENTRE.TUTEUR_ENS_OBLIGATOIRE']} *"
                           for="tuteurEnsObligatoire" escape="false" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid columns="2">
            <p:selectBooleanCheckbox id="tuteurProObligatoire"
                                     value="#{centreController.centre.presenceTuteurPro}" />
            <h:outputLabel value="#{msgs['CENTRE.TUTEUR_PRO_OBLIGATOIRE']} *"
                           for="tuteurProObligatoire" escape="false" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid columns="2">
            <p:selectBooleanCheckbox id="saisieEnLigne" required="true"
                                     value="#{centreController.centre.saisieTuteurProParEtudiant}" />
            <h:outputLabel value="#{msgs['CENTRE.SAISIE_EN_LIGNE']} *"
                           for="saisieEnLigne" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid columns="2"
                     rendered="#{sessionController.autoriserCentresBloquerImpressionConvention}">
            <p:selectBooleanCheckbox id="impressionConvention"
                                     value="#{centreController.centre.autoriserImpressionConvention}" />
            <h:outputLabel value="#{msgs['CENTRE.IMPRESSIONCONVENTION']} *"
                           for="impressionConvention" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid columns="2">
            <p:selectBooleanCheckbox id="creationConvention"
                                     value="#{centreController.centre.autorisationEtudiantCreationConvention}" />
            <h:outputLabel value="#{msgs['CENTRE.CREATIONCONVENTION']} *"
                           for="creationConvention" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid columns="2"
                     rendered="#{sessionController.validationPedagogique}">
            <p:selectBooleanCheckbox id="validationPedagogique"
                                     value="#{centreController.centre.validationPedagogique}" />
            <h:outputLabel value="#{msgs['CENTRE.VALIDATION_PEDAGOGIQUE']} *"
                           for="validationPedagogique" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid columns="2">
            <p:selectBooleanCheckbox id="visibiliteEvalPro"
                                     value="#{centreController.centre.visibiliteEvalPro}" />
            <h:outputLabel value="#{msgs['CENTRE.VISIBILITE_EVAL_TUTEURPRO']} *"
                           for="visibiliteEvalPro" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <!-- 						<h:outputLabel value="#{msgs['CENTRE.MOIS_PRECEDENT']} *" -->
        <!-- 							for="moisPrecedent" /> -->
        <!-- 						<h:selectOneRadio id="moisPrecedent" -->
        <!-- 							value="#{centreController.centre.choixAnneeAvantDebutAnnee}"> -->
        <!-- 							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" /> -->
        <!-- 							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" /> -->
        <!-- 						</h:selectOneRadio> -->

        <!-- 						<t:htmlTag value="div" style="height: 5px;" /> -->

        <!-- 						<h:outputLabel value="#{msgs['CENTRE.MOIS_SUIVANT']} *" -->
        <!-- 							for="moisSuivant" /> -->
        <!-- 						<h:selectOneRadio id="moisSuivant" -->
        <!-- 							value="#{centreController.centre.choixAnneeApresDebutAnnee}"> -->
        <!-- 							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" /> -->
        <!-- 							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" /> -->
        <!-- 						</h:selectOneRadio> -->

        <p:separator style="width:10%;" />

        <h:outputText value="#{msgs['GENERAL.FACULTATIF']}" escape="false" />

        <t:htmlTag value="div" style="height: 5px;" />

        <h:panelGrid columns="2">
            <p:outputLabel id="labelUrlPageInstru"
                           value="#{msgs['CENTRE.URL_PAGE_INSTRUCTION']} "
                           for="pageInstruction" />
            <h:outputText value="#{msgs['STRUCTURE.SITEWEB.AIDE']}"
                          escape="false" />
        </h:panelGrid>
        <h:panelGrid columns="2">
            <p:inputText id="pageInstruction"
                         value="#{centreController.centre.urlPageInstruction}" size="50"
                         validatorMessage="#{requiredMessageController.siteWebNonValide}"
                         maxlength="200">
                <f:validator binding="#{siteWebValidator}" />
                <p:ajax event="blur"
                        update="msgPageInstru,pageInstruction,labelUrlPageInstru" />
            </p:inputText>
            <p:message id="msgPageInstru" for="pageInstruction" />
        </h:panelGrid>

        <t:htmlTag value="div" style="height: 10px;" />

        <h:panelGrid id="panelViseur">
            <h:panelGrid columns="2">
                <h:outputLabel for="searchViseur" escape="false"
                               value="#{msgs['CENTRE.VISEUR.CHOISIR']}" />
                <h:graphicImage id="imgInfoViseur"
                                title="#{msgs['CENTRE.INFO_BULLES.VISEUR']}"
                                alt="#{msgs['CENTRE.INFO_BULLES.VISEUR']}"
                                value="/media/images/information.png">
                    <p:tooltip value="#{msgs['CENTRE.INFO_BULLES.VISEUR']}"
                               for="imgInfoViseur" />
                </h:graphicImage>
            </h:panelGrid>
            <p:commandButton id="searchViseur"
                             value="#{msgs['CENTRE.VISEUR.RECHERCHE']}"
                             action="#{centreController.avantRecherchePersonnel}"
                             oncomplete="PF('recherchePersonnel').show()"
                             rendered="#{empty centreController.centre.nomViseur}"
                             update="recherchePersonnel" immediate="true" />
            <h:panelGrid columns="2"
                         rendered="#{not empty centreController.centre.nomViseur}">
                <h:outputText style="color:green; border:1px solid; padding:2px;"
                              value="#{centreController.centre.nomViseur} #{centreController.centre.prenomViseur}" />
                <h:panelGrid columns="2">
                    <p:graphicImage alt="#{msgs['FORM.SUPPRIMER']}"
                                    title="#{msgs['GENERAL.FILE']}"
                                    value="/media/images/cancel.png" />
                    <p:commandLink id="removeViseur"
                                   value="#{msgs['CENTRE.VISEUR.RETIRER']}" update="panelViseur"
                                   immediate="true">
                        <f:setPropertyActionListener value=""
                                                     target="#{centreController.centre.nomViseur}" />
                        <f:setPropertyActionListener value=""
                                                     target="#{centreController.centre.prenomViseur}" />
                    </p:commandLink>
                </h:panelGrid>
            </h:panelGrid>

            <h:panelGrid columns="2"
                         rendered="#{not empty centreController.centre.nomViseur}">
                <h:outputLabel for="qualiteViseur"
                               value="#{msgs['CENTRE.QUALITE_VISEUR']} " />
                <h:inputText id="qualiteViseur"
                             value="#{centreController.centre.qualiteViseur}" size="50"
                             maxlength="100" />
            </h:panelGrid>
        </h:panelGrid>
    </t:fieldset>

</ui:composition>