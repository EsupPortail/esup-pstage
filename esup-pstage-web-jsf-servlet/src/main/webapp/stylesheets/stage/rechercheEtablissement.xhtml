<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:p="http://primefaces.org/ui"
                template="/stylesheets/_definedStageTemplate.xhtml">
    <ui:define name="content">
        <p:panel>
            <f:facet name="header">
                <h:outputText value="#{msgs['RECHERCHEETABLISSEMENT.TITRE']}" />
            </f:facet>
            <fieldset>
                <h:form>
                    <ui:include src="/stylesheets/_commun/_rechercheEtablissementLiensOnglets.xhtml" />
                </h:form>
                <ui:include src="/stylesheets/_commun/_rechercheEtablissementOnglets.xhtml" />
            </fieldset>
            <h:form id="formResultatsRechEtab">

                <p:message for="formResultatsRechEtab"/>

                <t:div rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}" styleClass="mt10 mb10">
                    <ui:include src="/stylesheets/_commun/_buttonCreationEtablissement.xhtml" />
                </t:div>

                <p:outputPanel id="opRechercheStructureDataTable">
                    <t:div rendered="#{not empty rechercheController.listeResultatsRechercheStructure}">

                        <ui:include src="/stylesheets/_commun/_rechercheEtablissementNbResultats.xhtml" />

                        <t:htmlTag value="div" style="height:10px;" />

                        <p:dataTable id="rechercheStructureDataTable"
                                     value="#{rechercheController.listeResultatsRechercheStructure}"
                                     var="varRechercheStructure" rows="15" rowHover="true"
                                     rowStyleClass="noPointer" paginator="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15,20">

                            <ui:include src="/stylesheets/_commun/_rechercheEtablissementResultatsColumns.xhtml" />

                            <ui:include src="/stylesheets/_commun/_rechercheEtablissementResultatsColumnsButtons.xhtml" />

                        </p:dataTable>
                    </t:div>
                </p:outputPanel>
            </h:form>
        </p:panel>
        <ui:include src="_panel_validStructure.xhtml" />
        <ui:include src="../_commun/_panelSupprStructure.xhtml" />
    </ui:define>
</ui:composition>
