<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:t="http://myfaces.apache.org/tomahawk">

    <t:htmlTag value="i" styleClass="fa fa-info-circle fz13 fontBlue2"/>
    <h:outputText value="#{msgs['CONVENTION.ETAPE2.RECHERCHE.ETAB']}" styleClass="ml5" escape="false"/>

    <t:div id="formResultatsRechEtab" styleClass="mt15 ml40">
        <ui:include src="/stylesheets/_commun/_rechercheEtablissementLiensOnglets.xhtml" />

        <ui:include src="/stylesheets/_commun/_rechercheEtablissementOngletsSansForm.xhtml" />

        <t:div rendered="#{not empty rechercheController.ongletCourant
			and rechercheController.ongletCourant!=6
			and rechercheController.afficherBoutonAjoutEtab}">
            <h:outputText value="#{msgs['STRUCTURE.AJOUT.CREER']}"
                          escape="false" />
            <p:commandLink id="ajoutEtab"
                           action="#{conventionController.goToCreerConventionEtape2CreaEtab}">
                <h:graphicImage alt="#{msgs['FORM.CREER']}"
                                value="/media/images/new.png" />
                <p:tooltip for="ajoutEtab" value="#{msgs['FORM.CREER']}" />
            </p:commandLink>
        </t:div>

        <t:htmlTag value="div" style="height:10px;" />
        <p:message for="formResultatsRechEtab" />

        <p:outputPanel id="opRechercheStructureDataTable">
            <t:div rendered="#{not empty rechercheController.listeResultatsRechercheStructure
					and not empty rechercheController.rechercheStructurePaginator}">
                <ui:include
                        src="../_commun/_rechercheEtablissementNbResultats.xhtml" />
                <p:dataTable id="rechercheStructureDataTable"
                             value="#{rechercheController.rechercheStructurePaginator.liste}"
                             var="varRechercheStructure" rows="20" rowHover="true"
                             rowStyleClass="noPointer" paginator="true"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="5,10,15,20"
                             rendered="#{not empty rechercheController.rechercheStructurePaginator.liste}">
                    <f:facet name="header">
                        <ui:include src="/stylesheets/_commun/_rechercheEtablissementResultatsHeaders.xhtml" />
                    </f:facet>
                    <ui:include src="/stylesheets/_commun/_rechercheEtablissementResultatsColumns.xhtml" />
                    <p:column>
                        <p:commandButton id="selectionEtab"
                                         value="#{msgs['RECHERCHEETABLISSEMENT.DETAILS']}"
                                         alt="#{msgs['RECHERCHEETABLISSEMENT.DETAILS']}"
                                         title="#{msgs['RECHERCHEETABLISSEMENT.DETAILS']}"
                                         action="#{conventionController.goToCreerConventionEtape2DetailsEtab}"
                                         image="../../media/images/zoom.png" update="formConvention">
                            <f:setPropertyActionListener value="#{varRechercheStructure}"
                                                         target="#{rechercheController.resultatRechercheStructure}" />
                            <f:setPropertyActionListener value="_creerConventionEtape2Etab"
                                                         target="#{conventionController.retourAction}" />
                            <p:tooltip value="#{msgs['RECHERCHEETABLISSEMENT.DETAILS']}" />
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </t:div>
        </p:outputPanel>
    </t:div>
    <p:commandButton value="#{msgs['FORM.PREVIOUS']}"
                     immediate="true" update="@form"
                     rendered="#{sessionController.utilisationEntreprise}"
                     styleClass="mt20 mb20">
        <f:setPropertyActionListener
                value="_creerConventionEtape2DemandeLienOffre"
                target="#{sessionController.creationConventionEtape2CurrentPage}" />
    </p:commandButton>
    <p:commandButton value="#{msgs['FORM.PREVIOUS']}"
                     immediate="true"
                     action="#{conventionController.retourEtape1Creation}"
                     rendered="#{!sessionController.utilisationEntreprise}"
                     styleClass="mt20 mb20"/>
</ui:composition>