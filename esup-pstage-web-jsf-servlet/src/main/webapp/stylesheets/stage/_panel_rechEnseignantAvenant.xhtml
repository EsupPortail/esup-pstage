<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<p:dialog id="rechEnseignantAvenant" widgetVar="rechEnseignantAvenant">
		<f:facet name="header">
			<h:outputText value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.HEAD']}" />
		</f:facet>
		<h:form id="formRechEnseignant">
			<p:outputPanel>
				<h:panelGrid>
					<h:outputText
						value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.RECHERCHE']}" />
					<t:htmlTag value="div" style="height: 10px;" />
					<h:panelGrid columns="2">
						<h:outputLabel value="#{msgs['CONVENTION.NOM']}"
							for="nomEnseignant" />
						<h:inputText id="nomEnseignant" size="50" maxlength="30"
							style="text-transform:uppercase;"
							value="#{conventionController.rechNomEnseignant}">
							<f:converter binding="#{sansAccentEnMAJConverter}" />
						</h:inputText>

						<t:htmlTag value="div" style="height: 5px;" />
						<t:htmlTag value="div" style="height: 5px;" />

						<h:outputLabel value="#{msgs['CONVENTION.PRENOM']}"
							for="prenomEnseignant" />
						<h:inputText id="prenomEnseignant" size="50" maxlength="30"
							style="text-transform:uppercase;"
							value="#{conventionController.rechPrenomEnseignant}">
							<f:converter binding="#{sansAccentEnMAJConverter}" />
						</h:inputText>

						<!-- 						<t:htmlTag value="div" style="height: 5px;" /> -->
						<!-- 						<t:htmlTag value="div" style="height: 5px;" /> -->

						<!-- 						<h:outputLabel value="#{msgs['CONVENTION.AFFECTATION']}" -->
						<!-- 							for="codeAffectation" /> -->
						<!-- 						<h:selectOneMenu id="codeAffectation" -->
						<!-- 							rendered="#{not empty conventionController.listeAffectation}" -->
						<!-- 							value="#{conventionController.selCodeAffectationEnseignant}"> -->
						<!-- 							<f:selectItem itemValue="" /> -->
						<!-- 							<f:selectItems value="#{conventionController.listeAffectation}" /> -->
						<!-- 						</h:selectOneMenu> -->
						<!-- 						<h:outputText rendered="#{empty conventionController.listeAffectation}" -->
						<!-- 							value="#{msgs['CENTRE.PERSONNEL.COMPOSANTE_VIDE']}" /> -->

					</h:panelGrid>
					<br />
					<h:panelGrid align="center">
						<p:commandButton value="#{msgs['FORM.RECHERCHER']}"
							action="#{conventionController.rechercheEnseignantAvenant}"
							update="divRechercheEnseignant" />
					</h:panelGrid>
				</h:panelGrid>
				<t:htmlTag value="center">
					<p:ajaxStatus for="rech">
						<f:facet name="start">
							<ui:include src="../_commun/_veuillezPatienter.xhtml" />
						</f:facet>
					</p:ajaxStatus>
				</t:htmlTag>

				<t:htmlTag value="center">
					<h:outputText id="information" value=""
						rendered="#{empty conventionController.listeResultatsRechercheEnseignant}" />
					<h:outputText id="nom" value="" />
					<p:message for="nom">
						<ui:include src="../_commun/_messageErrorMarker.xhtml" />
					</p:message>
				</t:htmlTag>

				<t:div id="divRechercheEnseignant">
					<h:panelGrid align="center"
						rendered="#{not empty conventionController.resultatEnseignant.nom}">
						<h:outputText
							value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.RESULTAT_UNIQUE']}" />
						<t:htmlTag value="div" style="height: 10px;" />
						<h:panelGrid align="center" columns="2">
							<h:outputLabel for="resultNom" value="#{msgs['CONVENTION.NOM']}" />
							<h:outputText id="resultNom"
								value="#{conventionController.resultatEnseignant.nom}" />
						</h:panelGrid>
						<h:panelGrid align="center" columns="2">
							<h:outputLabel for="resultPrenom"
								value="#{msgs['CONVENTION.PRENOM']}" />
							<h:outputText id="resultPrenom"
								value="#{conventionController.resultatEnseignant.prenom}" />
						</h:panelGrid>
						<h:panelGrid align="center" columns="2"
							rendered="#{not empty conventionController.resultatEnseignant.typePersonne}">
							<h:outputLabel for="resultType"
								value="#{msgs['CONVENTION.TYPE']}" />
							<h:outputText id="resultType"
								value="#{conventionController.resultatEnseignant.typePersonne}" />
						</h:panelGrid>
						<h:panelGrid align="center" columns="2"
							rendered="#{not empty conventionController.resultatEnseignant.affectation.libelle}">
							<h:outputLabel for="resultAffectation"
								value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.AFFECTATION']}" />
							<h:outputText id="resultAffectation"
								value="#{conventionController.resultatEnseignant.affectation.libelle}" />
						</h:panelGrid>
						<t:htmlTag value="center">
							<t:div>
								<p:commandLink id="choisir"
									oncomplete="PF('rechEnseignantAvenant')}.hide()"
									update="divEnseignant">
									<h:outputText
										value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.CHOIX']}" />
									<f:setPropertyActionListener
										value="#{conventionController.resultatEnseignant}"
										target="#{avenantController.avenant.enseignant}" />
								</p:commandLink>
							</t:div>
						</t:htmlTag>
					</h:panelGrid>

					<h:panelGrid align="center"
						rendered="#{not empty conventionController.listeEnseignant}">
						<h:outputText
							value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.RESULTAT_LISTE']}" />
						<t:htmlTag value="div" style="height: 10px;" />
						<p:dataTable style="width:483px;" id="listeEnseignants"
							value="#{conventionController.listeEnseignant}" var="enseignant"
							rows="5" rowHover="true" rowStyleClass="nopointer"
							paginator="true"
							paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
							rowsPerPageTemplate="5,10,15,20">

							<p:column sortBy="#{enseignant.nom}">
								<f:facet name="header">
									<h:outputText
										value="#{msgs['CONVENTION.NOM']}" />
								</f:facet>
								<t:htmlTag value="center">
									<h:outputText value="#{enseignant.nom}" />
								</t:htmlTag>
							</p:column>

							<p:column sortBy="#{enseignant.prenom}">
								<f:facet name="header">
									<h:outputText
										value="#{msgs['CONVENTION.PRENOM']}" />
								</f:facet>
								<t:htmlTag value="center">
									<h:outputText value="#{enseignant.prenom}" />
								</t:htmlTag>
							</p:column>

							<p:column sortBy="#{enseignant.typePersonne}">
								<f:facet name="header">
									<h:outputText
										value="#{msgs['CONVENTION.TYPE']}" />
								</f:facet>
								<t:htmlTag value="center">
									<h:outputText value="#{enseignant.typePersonne}" />
								</t:htmlTag>
							</p:column>

							<p:column sortBy="#{enseignant.affectation.libelle}">
								<f:facet name="header">
									<h:outputText
										value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.AFFECTATION']}" />
								</f:facet>
								<t:htmlTag value="center">
									<h:outputText value="#{enseignant.affectation.libelle}" />
								</t:htmlTag>
							</p:column>

							<p:column>
								<f:facet name="header">
									<h:outputText
										value="#{msgs['CONVENTION.ETAPE11.CHOIX']}" />
								</f:facet>
								<t:htmlTag value="center">
									<t:div>
										<p:commandLink id="choisir"
											oncomplete="PF('rechEnseignantAvenant')}.hide()"
											update="divEnseignant">
											<h:graphicImage alt="#{msgs['GENERAL.OK']}"
												value="../../media/images/arrow_right.png" />
											<f:setPropertyActionListener value="#{enseignant}"
												target="#{avenantController.avenant.enseignant}" />
											<p:tooltip
												value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT.CHOIX']}" />
										</p:commandLink>
									</t:div>
								</t:htmlTag>
							</p:column>
						</p:dataTable>
					</h:panelGrid>
				</t:div>
				<h:panelGrid id="back">
					<t:htmlTag value="div" style="height: 10px;" />
					<h:commandButton value="#{msgs['GENERAL.RETOUR']}"
						onclick="PF('rechEnseignantAvenant').hide();" />
				</h:panelGrid>
			</p:outputPanel>
		</h:form>
	</p:dialog>
</ui:composition>