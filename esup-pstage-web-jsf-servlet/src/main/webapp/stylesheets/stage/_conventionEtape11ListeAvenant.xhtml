<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<h:panelGrid align="center"
		rendered="#{avenantController.listeAvenantVide and !welcomeController.etudiant}"
		columns="1">
		<h:outputText value="#{msgs['CONVENTION.ETAPE11.VIDE']}" />
	</h:panelGrid>
	<h:panelGrid columns="1"
		style="width:800px;position:relative;margin-left:auto;margin-right:auto;"
		rendered="#{!avenantController.listeAvenantVide && conventionController.convention.validationConvention}">
		<a4j:outputPanel>
			<rich:spacer height="15" />
			<rich:dataTable align="center" width="483" id="listeAvenant" rows="5"
				columnClasses="col" value="#{avenantController.listeAvenants}"
				style="border-right:1px solid #C0C0C0;" var="avenant"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'">

				<rich:column sortBy="#{avenant.idAvenant}">
					<f:facet name="header">
						<h:outputText style="headerClass"
							value="#{msgs['CONVENTION.ETAPE11.ID']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{avenant.idAvenant}" />
					</t:htmlTag>
				</rich:column>

				<rich:column>
					<f:facet name="header">
						<h:outputText style="headerClass"
							value="#{msgs['CONVENTION.ETAPE11.TYPE']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText rendered="#{avenant.rupture}"
							value="#{msgs['CONVENTION.ETAPE11.RUPTURE']}" />
						<h:panelGrid columns="1" rendered="#{!avenant.rupture}">
							<h:outputText rendered="#{avenant.modificationSujet}"
								value="#{msgs['CONVENTION.ETAPE11.SUJET']}" />
							<h:outputText rendered="#{avenant.modificationPeriode}"
								value="#{msgs['CONVENTION.ETAPE11.PERIODE']}" />
							<h:outputText rendered="#{avenant.modificationLieu}"
								value="#{msgs['CONVENTION.ETAPE11.LIEU']}" />
							<h:outputText rendered="#{avenant.modificationSalarie}"
								value="#{msgs['CONVENTION.ETAPE11.SALARIE']}" />
							<h:outputText rendered="#{avenant.modificationEnseignant}"
								value="#{msgs['CONVENTION.ETAPE11.ENSEIGNANT']}" />
							<h:outputText
								rendered="#{avenant.modificationMontantGratification}"
								value="#{msgs['CONVENTION.ETAPE11.MONTANT_GRATIFICATION']}" />
						</h:panelGrid>
					</t:htmlTag>
				</rich:column>

				<rich:column sortBy="#{avenant.motifAvenant}">
					<f:facet name="header">
						<h:outputText style="headerClass"
							value="#{msgs['CONVENTION.ETAPE11.MOTIF']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{avenant.motifAvenant}" />
					</t:htmlTag>
				</rich:column>

				<rich:column sortBy="#{avenant.validationAvenant}">
					<f:facet name="header">
						<h:outputText style="headerClass"
							value="#{msgs['CONVENTION.ETAPE11.VALIDATION']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText rendered="#{avenant.validationAvenant}"
							value="#{msgs['FORM.OUI']}" />
						<h:outputText rendered="#{!avenant.validationAvenant}"
							value="#{msgs['FORM.NON']}" />
					</t:htmlTag>
				</rich:column>

				<rich:column
					rendered="#{welcomeController.superAdmin || welcomeController.etudiant
			|| sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitAdmin
			|| sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitEcriture}">
					<f:facet name="header">
						<h:outputText style="headerClass"
							value="#{msgs['GENERAL.ACTIONS']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:commandLink id="see"
							action="#{avenantController.goToDetailAvenant}">
							<f:setPropertyActionListener value="#{avenant}"
								target="#{avenantController.avenant}" />
							<h:graphicImage alt="#{msgs['FORM.VOIR']}"
								value="../../media/images/zoom.png" style="border:0" />
						</h:commandLink>
						<rich:toolTip for="see" value="#{msgs['FORM.CONSULTER']}" />
						<a4j:commandLink ajaxSingle="true"
							rendered="#{!avenant.validationAvenant}"
							oncomplete="#{rich:component('suppressionAvenant')}.show()"
							reRender="suppressionAvenant">
							<f:setPropertyActionListener value="#{avenant}"
								target="#{avenantController.avenant}" />
							<h:graphicImage alt="#{msgs['FORM.SUPPRIMER']}" id="delete"
								value="../../media/images/delete.png" style="border:0" />
						</a4j:commandLink>
						<rich:toolTip for="delete" value="#{msgs['FORM.SUPPRIMER']}" />
					</t:htmlTag>
				</rich:column>
				<f:facet name="footer">
					<rich:datascroller align="center" for="listeAvenant" maxPages="20"
						page="1" id="listeScroller" renderIfSinglePage="false" />
				</f:facet>
			</rich:dataTable>

			<rich:spacer height="10" />
			<h:panelGrid columns="2" align="center">
				<h:graphicImage id="warn" alt="#{msgs['GENERAL.WARNING']}"
					title="#{msgs['GENERAL.WARNING']}"
					value="../../media/images/warning_20px.png" style="border:0" />
				<h:outputLabel for="warn"
					value="#{msgs['CONVENTION.ETAPE11.SUPPRESSION.RAPPEL']}" />
			</h:panelGrid>
		</a4j:outputPanel>

		<rich:spacer height="5" />
	</h:panelGrid>
	<h:panelGrid columns="1" align="center"
		rendered="#{(welcomeController.superAdmin || welcomeController.etudiant
			|| sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitAdmin
			|| sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitEcriture)
			&& conventionController.convention.validationConvention}">
		<h:panelGrid columns="3" align="center">
			<h:outputText value="#{msgs['CONVENTION.ETAPE11.CREATION']}"
				escape="false" />
			<h:commandLink id="add"
				action="#{avenantController.goToCreaAvenantPage1}">
				<h:graphicImage alt="#{msgs['CONVENTION.ETAPE11.AJOUTER']}"
					value="../../media/images/new.png" style="border:0" />
			</h:commandLink>
			<rich:toolTip for="add" value="#{msgs['CONVENTION.ETAPE11.AJOUTER']}" />
		</h:panelGrid>
	</h:panelGrid>
	<h:panelGrid columns="2" align="center"
		rendered="#{(welcomeController.superAdmin || welcomeController.etudiant
			|| sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitAdmin
			|| sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitEcriture)
			&& !conventionController.convention.validationConvention}">
		<h:graphicImage id="warn2" alt="#{msgs['GENERAL.WARNING']}"
			title="#{msgs['GENERAL.WARNING']}"
			value="../../media/images/warning_20px.png" style="border:0" />
		<h:outputLabel for="warn2"
			value="#{msgs['CONVENTION.ETAPE11.INVALIDE']}" />
	</h:panelGrid>
</ui:fragment>