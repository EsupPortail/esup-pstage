<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<rich:panel
		style="width:800px;position:relative;margin-left:auto;margin-right:auto;">
		<f:facet name="header">
			<h:outputText value="#{msgs['CONVENTION.ETAPE1.LIENOFFRE']}" />
		</f:facet>
		<h:panelGrid columnClasses="paginatorData-text"
			rowClasses="paginatorData-text" columns="2" style="font-size:11px;">
			<h:graphicImage alt="#{msgs['CONVENTION.ETAPE1.OFFRE.RECUPINFO']}"
				title="#{msgs['CONVENTION.ETAPE1.OFFRE.RECUPINFO']}"
				value="../../media/images/information.png" style="border:0" />
			<h:outputText value="#{msgs['CONVENTION.ETAPE1.OFFRE.RECUPINFO']}" />
		</h:panelGrid>
		<t:htmlTag value="div" style="height: 10px;" />
		<t:div style="margin-left:40px;">
			<h:commandButton value="#{msgs['CONVENTION.ETAPE1.PARNUMERO']}"
				immediate="true"
				style="color: #{conventionController.rechOffreByNum ? 'green' : 'black'}; border: solid 1px #{conventionController.rechOffreByNum ? 'green' : 'black'};">
				<f:setPropertyActionListener value="true"
					target="#{conventionController.rechOffreByNum}" />
			</h:commandButton>
			<t:htmlTag value="div" style="margin:5px; display:inline;" />
			<h:commandButton value="#{msgs['CONVENTION.ETAPE1.PARMOTSCLES']}"
				immediate="true"
				style="color: #{!conventionController.rechOffreByNum ? 'green' : 'black'}; border: solid 1px #{!conventionController.rechOffreByNum ? 'green' : 'black'};">
				<f:setPropertyActionListener value="false"
					target="#{conventionController.rechOffreByNum}" />
			</h:commandButton>
		</t:div>
		<t:htmlTag value="div" style="height:20px;" />
		<h:panelGrid columnClasses="paginatorData-text"
			rowClasses="paginatorData-text"
			rendered="#{conventionController.rechOffreByNum}">
			<h:panelGrid columns="3">
				<h:outputText value="#{msgs['CONVENTION.ETAPE1.RECHERCHE.OFFRE']}" style="font-weight:bold;"/>
				<h:inputText id="idOffre" size="10"
					value="#{conventionController.numOffreConvention}"
					requiredMessage="#{requiredMessageController.champObligatoire}"
					validatorMessage="#{requiredMessageController.superieurA0}">
					<f:validator binding="#{entierValidator}" />
					<a4j:ajax event="blur" execute="@this" />
					<f:validateLongRange minimum="1" />
				</h:inputText>
				<rich:message for="idOffre">
					<ui:include src="../_commun/_messageErrorMarker.xhtml" />
				</rich:message>
			</h:panelGrid>
		</h:panelGrid>
		<h:panelGrid columnClasses="paginatorData-text"
			rowClasses="paginatorData-text"
			rendered="#{!conventionController.rechOffreByNum}">
			<h:outputText value="#{msgs['CONVENTION.MINIRECHNUMOFFRE.TITRE']}"
				style="font-weight:bold;" />
			<t:htmlTag value="div" style="height:5px;" />
			<h:panelGrid columns="2">
				<rich:autocomplete mode="ajax" minChars="5" status="status1"
					value="#{conventionController.numOffreConvention}"
					autocompleteMethod="#{conventionController.suggestOffre}"
					autofill="false" layout="div" fetchValue="#{rechOffre.idOffre}"
					suggestionAction="#{conventionController.suggestOffre}"
					var="rechOffre" style="font-size:10px; margin-left:100px;"
					inputClass="ac" styleClass="ac" popupClass="acPopup">
					<rich:column>
						<h:outputText value="#{rechOffre.idOffre} : "
							style="font-weight: bold" />
					</rich:column>
					<rich:column>
						<h:outputText value="#{rechOffre.intitule}">
							<f:converter binding="#{limitCharactersShownUpTo30Converter}" />
						</h:outputText>
					</rich:column>
					<rich:column>
						<h:outputText value="#{rechOffre.typeOffre.libelle}"
							rendered="#{not empty rechOffre.typeOffre}" />
					</rich:column>
					<rich:column>
						<h:outputText value="#{rechOffre.contratOffre.libelle}"
							rendered="#{not empty rechOffre.contratOffre}" />
					</rich:column>
					<rich:column>
						<h:outputText value="#{rechOffre.structure.raisonSociale}"
							rendered="#{not empty rechOffre.structure}">
							<f:converter binding="#{limitCharactersShownUpTo30Converter}" />
						</h:outputText>
					</rich:column>
				</rich:autocomplete>
				<h:outputText value="#{msgs['CONVENTION.MINIRECHNUMOFFRE.MINIMUM']}"
					style="font-size:10px;" />
			</h:panelGrid>
			<a4j:status name="status1">
				<f:facet name="start">
					<ui:include src="../_commun/_veuillezPatienter.xhtml" />
				</f:facet>
			</a4j:status>
		</h:panelGrid>
		<t:htmlTag value="div" style="height: 10px;" />
		<h:commandButton action="#{conventionController.rechercheNumOffre}"
			render="formConvention" value="#{msgs['FORM.NEXT']}"
			style="font-size:14px; border:solid 1px; margin-left:200px;">
			<f:setPropertyActionListener value="_creerConventionEtape1Offre"
				target="#{conventionController.retourAction}" />
		</h:commandButton>

		<t:htmlTag value="div" style="height:30px;" />
		<h:commandButton value="#{msgs['FORM.PREVIOUS']}" immediate="true"
			action="creerConventionEtape1Etudiant">
			<f:setPropertyActionListener
				value="_creerConventionEtape1DemandeLienOffre"
				target="#{sessionController.creationConventionEtape1CurrentPage}" />
		</h:commandButton>
	</rich:panel>
</ui:composition>