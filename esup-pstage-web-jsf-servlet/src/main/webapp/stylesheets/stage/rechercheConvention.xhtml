<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="../_definedStageTemplate.xhtml">
	<ui:define name="content">
		<rich:panel>
			<f:facet name="header">
				<h:outputText value="#{msgs['RECHERCHECONVENTION.TITRE']}" />
			</f:facet>
			<h:form id="formRechConvention">
				<h:panelGrid columnClasses="paginatorData-text"
					rowClasses="paginatorData-text" columns="1" style="width:auto;">

					<ui:include src="/stylesheets/stage/_panel_limites_resultats.xhtml" />
					
					<t:htmlTag value="div" style="height:10px;" />
					
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NUMCONVENTION']}"
						for="numConvention" />
					<h:inputText id="numConvention"
						value="#{conventionController.critereRechercheConvention.idConvention}"
						size="10" maxlength="10" />
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.SUJETSTAGE']}"
						rendered="#{conventionController.rechercheAvancee}"
						for="sujetStage" />
					<h:inputText id="sujetStage"
						rendered="#{conventionController.rechercheAvancee}"
						value="#{conventionController.critereRechercheConvention.sujetStage}"
						size="50" maxlength="200" />
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.TYPECONV']}"
						rendered="#{conventionController.rechercheAvancee}" for="typeConv" />
					<h:selectOneMenu id="typeConv"
						value="#{conventionController.critereRechercheConvention.typeConvention}"
						converter="#{typeConventionConverter}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.typeConventions}" />
					</h:selectOneMenu>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.THEME']}"
						rendered="#{conventionController.rechercheAvancee}" for="theme" />
					<h:selectOneMenu id="theme"
						value="#{conventionController.critereRechercheConvention.theme}"
						converter="#{themeConverter}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.themes}" />
					</h:selectOneMenu>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NBJH']}"
						rendered="#{conventionController.rechercheAvancee}" for="nbJH" />
					<h:selectOneMenu id="nbJH"
						value="#{conventionController.critereRechercheConvention.nbJoursHebdo}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{conventionController.nbJoursHebdoItems}" />
					</h:selectOneMenu>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.GRAT']}"
						rendered="#{conventionController.rechercheAvancee}" for="grat" />
					<h:selectOneMenu id="grat"
						value="#{conventionController.critereRechercheConvention.indemnisation}"
						converter="#{indemnisationConverter}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.indemnisations}" />
					</h:selectOneMenu>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.TEMPSTRAVAIL']}"
						rendered="#{conventionController.rechercheAvancee}" for="tpsT" />
					<h:selectOneMenu id="tpsT"
						value="#{conventionController.critereRechercheConvention.tempsTravail}"
						converter="#{tempsTravailConverter}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.tempsTravail}" />
					</h:selectOneMenu>
					<h:outputLabel
						value="#{msgs['RECHERCHECONVENTION.LANGUEIMPRESSION']}"
						rendered="#{conventionController.rechercheAvancee}" for="langue" />
					<h:selectOneMenu id="langue"
						value="#{conventionController.critereRechercheConvention.langueConvention}"
						converter="#{langueConventionConverter}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.langueConventions}" />
					</h:selectOneMenu>
					<h:panelGrid columns="2" columnClasses="paginatorData-text"
						rowClasses="paginatorData-text"
						rendered="#{conventionController.rechercheAvancee}">
						<h:outputLabel value="#{msgs['RECHERCHECONVENTION.VALIDEE']}"
							rendered="#{conventionController.rechercheAvancee}" for="validee" />
						<h:selectOneRadio id="validee" style="font-size:12px;"
							value="#{conventionController.estValidee}">
							<f:selectItem itemValue="#{'1'}"
								itemLabel="#{msgs['RECHERCHECONVENTION.VALIDEE.OUI']}" />
							<f:selectItem itemValue="#{'2'}"
								itemLabel="#{msgs['RECHERCHECONVENTION.VALIDEE.NON']}" />
							<f:selectItem itemValue="#{null}"
								itemLabel="#{msgs['RECHERCHECONVENTION.VALIDEE.OUIETNON']}" />
						</h:selectOneRadio>
					</h:panelGrid>
					<h:panelGrid columns="2" columnClasses="paginatorData-text"
						rowClasses="paginatorData-text"
						rendered="#{conventionController.rechercheAvancee and sessionController.validationPedagogique}">
						<h:outputLabel value="#{msgs['RECHERCHECONVENTION.VERIFIEE']}"
							rendered="#{conventionController.rechercheAvancee}" for="validee" />
						<h:selectOneRadio id="verifiee" style="font-size:12px;"
							value="#{conventionController.estVerifiee}">
							<f:selectItem itemValue="#{'1'}"
								itemLabel="#{msgs['RECHERCHECONVENTION.VERIFIEE.OUI']}" />
							<f:selectItem itemValue="#{'2'}"
								itemLabel="#{msgs['RECHERCHECONVENTION.VERIFIEE.NON']}" />
							<f:selectItem itemValue="#{null}"
								itemLabel="#{msgs['RECHERCHECONVENTION.VERIFIEE.OUIETNON']}" />
						</h:selectOneRadio>
					</h:panelGrid>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.DATESTAGE']}"
						rendered="#{conventionController.rechercheAvancee}"
						for="dateStage" />
					<h:selectOneMenu id="dateStage"
						value="#{conventionController.critereRechercheConvention.dateStage}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.datesStage}" />
					</h:selectOneMenu>
					<h:outputLabel
						rendered="#{not empty nomenclatureController.anneesConvention}"
						value="#{msgs['RECHERCHECONVENTION.ANNEEU']}" for="anU" />
					<h:selectOneMenu id="anU"
						rendered="#{not empty nomenclatureController.anneesConvention}"
						value="#{conventionController.critereRechercheConvention.anneeUniversitaire}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.anneesConvention}" />
					</h:selectOneMenu>

					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />
					<t:htmlTag value="div" style="height: 4px;" styleClass="spacer"
						rendered="#{conventionController.rechercheAvancee}" />
					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />

					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NUMETUDIANT']}"
						for="numEtudiant" />
					<h:inputText id="numEtudiant"
						value="#{conventionController.critereRechercheConvention.numeroEtudiant}"
						size="10" maxlength="16" />
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NOMETUDIANT']}"
						for="nomEtudiant" />
					<h:inputText id="nomEtudiant"
						value="#{conventionController.critereRechercheConvention.nomEtudiant}"
						size="50" maxlength="50" />
					<h:outputLabel
						value="#{msgs['RECHERCHECONVENTION.PRENOMETUDIANT']}"
						for="prenomEtudiant" />
					<h:inputText id="prenomEtudiant"
						value="#{conventionController.critereRechercheConvention.prenomEtudiant}"
						size="50" maxlength="50" />
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.UFRS']}"
						rendered="#{conventionController.rechercheAvancee and
								not empty conventionController.rechUfrs}"
						for="ufrs" />
					<h:selectManyMenu id="ufrs"
						value="#{conventionController.critereRechercheConvention.idsUfrs}"
						rendered="#{conventionController.rechercheAvancee and
								not empty conventionController.rechUfrs}"
						style="height:100px;">
						<f:selectItems value="#{conventionController.rechUfrs}" />
					</h:selectManyMenu>
					<h:panelGrid columnClasses="paginatorData-text"
						rowClasses="paginatorData-text" columns="2"
						style="font-size:11px;"
						rendered="#{conventionController.rechercheAvancee and
								not empty conventionController.rechUfrs}">
						<h:graphicImage alt="#{msgs['RECHERCHECONVENTION.UFRS']}"
							title="#{msgs['RECHERCHECONVENTION.UFRS']}"
							value="../../media/images/information.png" style="border:0" />
						<h:outputText value="#{msgs['RECHERCHECONVENTION.UFRS.AIDE']}" />
					</h:panelGrid>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.ETAPES']}"
						rendered="#{conventionController.rechercheAvancee
								and not empty conventionController.rechEtapes}"
						for="etapes" />
					<h:selectManyMenu id="etapes"
						value="#{conventionController.critereRechercheConvention.idsEtapes}"
						rendered="#{conventionController.rechercheAvancee
								and not empty conventionController.rechEtapes}"
						style="height:100px;">
						<f:selectItems value="#{conventionController.rechEtapes}" />
					</h:selectManyMenu>
					<h:panelGrid columnClasses="paginatorData-text"
						rowClasses="paginatorData-text" columns="2"
						style="font-size:11px;"
						rendered="#{conventionController.rechercheAvancee
								and not empty conventionController.rechEtapes}">
						<h:graphicImage alt="#{msgs['RECHERCHECONVENTION.ETAPES']}"
							title="#{msgs['RECHERCHECONVENTION.ETAPES']}"
							value="../../media/images/information.png" style="border:0" />
						<h:outputText value="#{msgs['RECHERCHECONVENTION.ETAPES.AIDE']}" />
					</h:panelGrid>

					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />
					<t:htmlTag value="div" style="height: 4px;" styleClass="spacer"
						rendered="#{conventionController.rechercheAvancee}" />
					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />

					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NOMENSEIGNANT']}"
						for="nomEnseignant"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:inputText id="nomEnseignant"
						value="#{conventionController.critereRechercheConvention.nomEnseignant}"
						size="50" maxlength="50"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:outputLabel
						value="#{msgs['RECHERCHECONVENTION.PRENOMENSEIGNANT']}"
						for="prenomEnseignant"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:inputText id="prenomEnseignant"
						value="#{conventionController.critereRechercheConvention.prenomEnseignant}"
						size="50" maxlength="50"
						rendered="#{conventionController.rechercheAvancee}" />

					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />
					<t:htmlTag value="div" style="height: 4px;" styleClass="spacer"
						rendered="#{conventionController.rechercheAvancee}" />
					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />

					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.RAISONSOCIALE']}"
						for="raisonSociale"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:panelGrid columns="2"
						rendered="#{conventionController.rechercheAvancee}">
						<h:graphicImage id="infoRs"
							alt="#{msgs['INFOSBULLES.RAISON_SOCIALE']}"
							value="../../media/images/information.png" style="border:0">
							<rich:tooltip value="#{msgs['INFOSBULLES.RAISON_SOCIALE']}" />
						</h:graphicImage>
						<h:inputText id="raisonSociale"
							value="#{conventionController.critereRechercheConvention.raisonSociale}"
							size="50" maxlength="200" />
					</h:panelGrid>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NUMEROSIRET']}"
						for="numSiret" rendered="#{conventionController.rechercheAvancee}" />
					<h:panelGrid columns="2"
						rendered="#{conventionController.rechercheAvancee}">
						<h:graphicImage id="infoNumsiret"
							alt="#{msgs['INFOSBULLES.NUMERO_SIRET']}"
							value="../../media/images/information.png" style="border:0">
							<rich:tooltip value="#{msgs['INFOSBULLES.NUMERO_SIRET']}" />
						</h:graphicImage>
						<h:inputText id="numSiret"
							value="#{conventionController.critereRechercheConvention.numeroSiret}"
							size="20" maxlength="14" />
					</h:panelGrid>

					<h:panelGrid columns="2"
						rendered="#{conventionController.rechercheAvancee}"
						for="conventionEtrangereOuChoixPays">
						<h:selectOneRadio id="conventionEtrangereOuChoixPays"
							value="#{conventionController.estEtrangere}">
							<f:selectItem
								itemLabel="#{msgs['RECHERCHECONVENTION.CHOIX.PAYS']}"
								itemValue="false" />
							<a4j:ajax event="valueChange" render="choixPaysPanel" />
							<f:selectItem
								itemLabel="#{msgs['RECHERCHECONVENTION.ETRANGERE']}"
								itemValue="true" />
						</h:selectOneRadio>
						<t:htmlTag value="div" style="width:20px;" />
						<a4j:outputPanel id="choixPaysPanel">
							<h:panelGrid columns="2"
								rendered="#{!conventionController.estEtrangere}">
								<h:outputLabel value="#{msgs['RECHERCHECONVENTION.PAYS']}"
									for="pays" rendered="#{conventionController.rechercheAvancee}" />
								<h:selectOneMenu id="pays"
									value="#{conventionController.critereRechercheConvention.pays}"
									converter="#{paysConverter}"
									rendered="#{conventionController.rechercheAvancee}"
									styleClass="paysInput">
									<f:selectItem itemValue=" " />
									<f:selectItems value="#{nomenclatureController.pays}" />
								</h:selectOneMenu>
							</h:panelGrid>
						</a4j:outputPanel>
					</h:panelGrid>

					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.COMMUNE']}"
						for="commune" rendered="#{conventionController.rechercheAvancee}" />
					<h:inputText id="commune"
						value="#{conventionController.critereRechercheConvention.commune}"
						size="50" maxlength="200"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.CODEPOSTAL']}"
						for="codePostal"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:inputText id="codePostal"
						value="#{conventionController.critereRechercheConvention.codePostal}"
						size="10" maxlength="10"
						rendered="#{conventionController.rechercheAvancee}" />


					<t:htmlTag value="div" style="height: 5px;"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:outputLabel
						value="#{msgs['RECHERCHECONVENTION.TYPESTATUTSTRUCTURE']}"
						for="typeStatut"
						rendered="#{conventionController.rechercheAvancee}" />
					<h:selectOneMenu id="typeStatut"
						value="#{conventionController.rechTypeOuStatut}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems
							value="#{conventionController.rechTypesStatutsStructure}" />
					</h:selectOneMenu>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.EFFECTIF']}"
						for="effectif" rendered="#{conventionController.rechercheAvancee}" />
					<h:selectOneMenu id="effectif"
						value="#{conventionController.critereRechercheConvention.effectif}"
						converter="#{effectifConverter}"
						rendered="#{conventionController.rechercheAvancee}">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.effectifs}" />
					</h:selectOneMenu>
					<h:outputLabel value="#{msgs['RECHERCHECONVENTION.NAFN1']}"
						for="nafN1" rendered="#{conventionController.rechercheAvancee}" />
					<h:selectOneMenu id="nafN1"
						value="#{conventionController.critereRechercheConvention.nafN1}"
						converter="#{nafN1Converter}"
						rendered="#{conventionController.rechercheAvancee}"
						style="width:300px;">
						<f:selectItem itemValue="" />
						<f:selectItems value="#{nomenclatureController.nafN1}" />
					</h:selectOneMenu>

					<t:htmlTag value="div" style="height: 20px;" />
					<h:panelGrid columnClasses="paginatorData-text"
						rowClasses="paginatorData-text" columns="8">
						<a4j:commandButton
							value="#{msgs['RECHERCHECONVENTION.RECHERCHER']}"
							action="#{conventionController.rechercherConvention}"
							status="statusRecherche">
							<f:setPropertyActionListener value="resultatsRechercheConvention"
								target="#{conventionController.retourAction}" />
						</a4j:commandButton>
						<t:htmlTag value="div" style="width: 100px;" />
						<h:commandButton
							value="#{msgs['RECHERCHECONVENTION.RECHERCHESIMPLE']}"
							action="#{conventionController.rechercheSimpleAvancee}"
							rendered="#{conventionController.rechercheAvancee}" />
						<h:commandButton
							value="#{msgs['RECHERCHECONVENTION.RECHERCHEAVANCEE']}"
							action="#{conventionController.rechercheSimpleAvancee}"
							rendered="#{!conventionController.rechercheAvancee}" />
						<t:htmlTag value="div" style="width: 20px;" />
						<h:commandButton value="#{msgs['RECHERCHECONVENTION.REINIT']}"
							action="#{conventionController.resetRechercheConvention}" />
						<t:htmlTag value="div" style="width: 20px;" />
						<a4j:commandButton status="statusRecherche"
							value="#{msgs['RECHERCHECONVENTION.TELEXPORT']}"
							action="#{exportController.rechercherConvention}">
							<f:setPropertyActionListener
								value="#{conventionController.critereRechercheConvention}"
								target="#{exportController.critereRechercheConvention}" />
							<f:setPropertyActionListener
								value="#{conventionController.estValidee}"
								target="#{exportController.estValidee}" />
						</a4j:commandButton>
					</h:panelGrid>
					<a4j:status name="statusRecherche">
						<f:facet name="start">
							<ui:include src="../_commun/_veuillezPatienter.xhtml" />
						</f:facet>
					</a4j:status>

				</h:panelGrid>
			</h:form>
			<rich:message for="formRechConvention" escape="false"
				style="color:red;font-weight:bold;">
				<ui:include src="../_commun/_messageErrorMarker.xhtml" />
			</rich:message>
		</rich:panel>
	</ui:define>
</ui:composition>
