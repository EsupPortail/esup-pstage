<%@include file="../_include.jsp"%>
<e:panelGrid columns="1"
	style="width:800px;position:relative;margin-left:auto;margin-right:auto;">
	<rich:panel>
		<f:facet name="header">
			<e:text value="#{msgs['CONVENTION.ETAPE2.MODIFSERVICECONTACT']}" />
		</f:facet>
		<e:panelGrid columns="1">
			
			<t:div id="information">
				<rich:message for="information">
					<%@include file="../_commun/_messageInfoMarker.jsp"%>
				</rich:message>
			</t:div>

			<a4j:commandButton ajaxSingle="true"
				oncomplete="#{rich:component('selectServiceContact')}.show()"
				value="#{msgs['CONVENTION.ETAPE2.MODIF.SERVICECONTACT.SELEC']}">
				<f:setPropertyActionListener value="#{0}"
					target="#{etablissementController.idContactSel}" />
				<f:setPropertyActionListener value="#{null}"
					target="#{etablissementController.contactSel}" />
				<f:setPropertyActionListener value="#{0}"
					target="#{etablissementController.idServiceSel}" />
				<f:setPropertyActionListener value="#{null}"
					target="#{etablissementController.serviceSel}" />
				<f:setPropertyActionListener value="#{false}"
					target="#{etablissementController.afficherSelectionCentreContact}" />
			</a4j:commandButton>
			<rich:modalPanel id="selectServiceContact" autosized="true" width="400"
				styleClass="panel" domElementAttachment="parent">
				<%@include file="../_commun/_subPanelSelectContact.jsp"%>
				<a4j:commandButton value="#{msgs['FORM.SELECTIONNER']}"
					oncomplete="#{rich:component('selectServiceContact')}.hide();"
					ignoreDupResponses="true" 
					action="#{conventionController.goToConventionModifEtabServiceContact}">
					<f:setPropertyActionListener
						value="#{etablissementController.serviceSel}"
						target="#{conventionController.convention.service}" />
					<f:setPropertyActionListener
						value="#{etablissementController.contactSel}"
						target="#{conventionController.convention.contact}" />
				</a4j:commandButton>
				<rich:spacer width="150px" />
				<a4j:commandButton value="#{msgs['FORM.CANCEL']}" ajaxSingle="true"
					onclick="#{rich:component('selectServiceContact')}.hide();return false;" />
			</rich:modalPanel>

		</e:panelGrid>
	</rich:panel>
</e:panelGrid>