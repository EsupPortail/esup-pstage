<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui"
	template="../_definedStageTemplate.xhtml">
	<ui:define name="content">
		<p:panel
			rendered="#{(welcomeController.superAdmin || welcomeController.admin)
						and centreController.centre != null}">
			<f:facet name="header">
				<h:outputText
					value="#{msgs['CENTRE.MODIF_CENTRE.HEAD']} #{centreController.centre.nomCentre}" />
			</f:facet>
			<ui:include src="./_menu_centre.xhtml" />
			<h:form id="formModifCentre">
				<h:panelGrid
					style="margin-left:100px;">
					<h:outputText value="#{msgs['CENTRE.AJOUT_CENTRE.ACCUEIL']}" />
					<t:htmlTag value="div" style="height: 10px;" />
					<h:outputLabel value="#{msgs['CENTRE.NOM']} *" for="nomCentre" />
					<h:panelGrid
						columns="2">
						<p:inputText id="nomCentre" style="text-transform:uppercase;"
							value="#{centreController.centre.nomCentre}" size="50"
							maxlength="100" required="true"
							requiredMessage="#{requiredMessageController.champObligatoire}">
							<f:converter binding="#{sansAccentEnMAJConverter}" />
						</p:inputText>
						<p:message for="nomCentre">
							<ui:include src="../_commun/_messageErrorMarker.xhtml" />
						</p:message>
					</h:panelGrid>
					<t:htmlTag value="div" style="height: 10px;" />

					<h:panelGrid
						columns="3">
						<h:panelGrid
							>
							<h:outputLabel value="#{msgs['CENTRE.VOIE']} *" for="voie" />
							<h:inputText id="voie" value="#{centreController.centre.voie}"
								size="50" maxlength="200" required="true"
								requiredMessage="#{requiredMessageController.champObligatoire}" />
							<p:message for="voie">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>

							<h:outputLabel value="#{msgs['CENTRE.BATIMENT_RESIDENCE']}"
								for="batimentResidence" />
							<h:inputText id="batimentResidence"
								value="#{centreController.centre.batimentResidence}" size="50"
								maxlength="200" />
						</h:panelGrid>

						<h:panelGrid
							columns="3">
							<t:htmlTag value="div" style="width: 25px;" />
							<t:htmlTag value="div"
								style="width: 2px; height: 110px; background-color: #{pSkin.panelBorderColor};" />
							<t:htmlTag value="div" style="width: 25px;" />
						</h:panelGrid>

						<h:panelGrid
							>
							<h:outputLabel value="#{msgs['CENTRE.CODE_POSTAL']} *"
								for="codePostal" />
							<h:panelGrid
								columns="2">
								<h:inputText id="codePostal"
									value="#{centreController.centre.codePostal}" size="20"
									maxlength="10" required="true"
									requiredMessage="#{requiredMessageController.champObligatoire}" />
								<p:message for="codePostal">
									<ui:include src="../_commun/_messageErrorMarker.xhtml" />
								</p:message>
							</h:panelGrid>

							<h:outputLabel value="#{msgs['CENTRE.COMMUNE']} *" for="commune" />
							<h:inputText id="commune" style="text-transform:uppercase;"
								value="#{centreController.centre.commune}" size="50"
								maxlength="200" required="true"
								requiredMessage="#{requiredMessageController.champObligatoire}" />
							<p:message for="commune">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>
						</h:panelGrid>
					</h:panelGrid>

					<h:panelGrid
						columns="3">
						<h:panelGrid
							>
							<h:panelGrid
								columns="2">
								<h:outputLabel value="#{msgs['CENTRE.MAIL']} " for="mail" />
								<h:outputText value="#{msgs['CONTACT.MAIL.AIDE']}"
									escape="false" />
							</h:panelGrid>
							<h:inputText id="mail" value="#{centreController.centre.mail}"
								size="50"
								validatorMessage="#{requiredMessageController.adresseMailNonValide}"
								maxlength="50">
								<f:validator binding="#{mailValidator}" />
							</h:inputText>
							<p:message for="mail">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>
							<h:panelGrid
								columns="2">
								<h:outputLabel value="#{msgs['CENTRE.SITEWEB']} " for="siteWeb" />
								<h:outputText value="#{msgs['STRUCTURE.SITEWEB.AIDE']}"
									escape="false" />
							</h:panelGrid>
							<h:inputText id="siteWeb"
								value="#{centreController.centre.siteWeb}" size="50"
								validatorMessage="#{requiredMessageController.siteWebNonValide}"
								maxlength="200">
								<f:validator binding="#{siteWebValidator}" />
							</h:inputText>
							<p:message for="siteWeb">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>
						</h:panelGrid>

						<h:panelGrid
							columns="3">
							<t:htmlTag value="div" style="width: 25px;" />
							<t:htmlTag value="div"
								style="width: 2px; height: 110px; background-color: #{pSkin.panelBorderColor};" />
							<t:htmlTag value="div" style="width: 25px;" />
						</h:panelGrid>

						<h:panelGrid
							>
							<h:outputLabel value="#{msgs['CENTRE.TEL']} *" for="telephone" />
							<h:panelGrid
								columns="2">
								<h:inputText id="telephone"
									value="#{centreController.centre.telephone}" size="20"
									maxlength="20" required="true"
									requiredMessage="#{requiredMessageController.champObligatoire}" />
								<p:message for="telephone">
									<ui:include src="../_commun/_messageErrorMarker.xhtml" />
								</p:message>
							</h:panelGrid>
							<h:outputLabel value="#{msgs['CENTRE.FAX']} " for="fax" />
							<h:panelGrid
								columns="2">
								<h:inputText id="fax" value="#{centreController.centre.fax}"
									size="20" maxlength="20" />
								<p:message for="fax">
									<ui:include src="../_commun/_messageErrorMarker.xhtml" />
								</p:message>
							</h:panelGrid>
						</h:panelGrid>
					</h:panelGrid>
					<t:htmlTag value="div" style="height: 10px;" />
					<h:panelGrid
						>
						<h:panelGrid
							columns="2">
							<h:outputLabel value="#{msgs['CENTRE.URL_PAGE_INSTRUCTION']} "
								for="pageInstruction" />
							<h:outputText value="#{msgs['STRUCTURE.SITEWEB.AIDE']}"
								escape="false" />
						</h:panelGrid>
						<h:panelGrid
							columns="2">
							<h:inputText id="pageInstruction"
								value="#{centreController.centre.urlPageInstruction}" size="50"
								validatorMessage="#{requiredMessageController.siteWebNonValide}"
								maxlength="200">
								<f:validator binding="#{siteWebValidator}" />
							</h:inputText>
							<p:message for="pageInstruction">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>
						</h:panelGrid>

						<t:htmlTag value="div" style="height: 5px;" />

						<t:div id="panelViseur">
							<h:panelGrid
								>
								<h:outputLabel for="searchViseur"
									value="#{msgs['CENTRE.VISEUR.CHOISIR']}" />
								<h:panelGrid
									columns="2">
									<p:commandButton
										rendered="#{empty centreController.centre.nomViseur}"
										id="searchViseur" 
										value="#{msgs['CENTRE.VISEUR.RECHERCHE']}"
										oncomplete="PF('rechercheViseur').show();"
										action="#{centreController.avantRechercheViseur}"
										update="rechercheViseur" />
									<h:outputText
										rendered="#{not empty centreController.centre.nomViseur}"
										style="color:green; border:1px solid;"
										value="#{centreController.centre.nomViseur} #{centreController.centre.prenomViseur}" />
									<p:commandLink 
										rendered="#{not empty centreController.centre.nomViseur}"
										id="removeViseur" update="panelViseur">
										<h:graphicImage alt="#{msgs['FORM.SUPPRIMER']}"
											title="#{msgs['GENERAL.FILE']}"
											value="../../media/images/cancel.png" />
										<h:outputText value="#{msgs['CENTRE.VISEUR.RETIRER']}" />
										<f:setPropertyActionListener value="#{null}"
											target="#{centreController.centre.nomViseur}" />
										<f:setPropertyActionListener value="#{null}"
											target="#{centreController.centre.prenomViseur}" />
									</p:commandLink>
								</h:panelGrid>
							</h:panelGrid>
							<h:panelGrid
								columns="2"
								rendered="#{not empty centreController.centre.nomViseur}">
								<h:outputLabel for="qualiteViseur"
									value="#{msgs['CENTRE.QUALITE_VISEUR']} " />
								<h:inputText id="qualiteViseur" value="#{centreController.centre.qualiteViseur}"
									size="50" maxlength="100" />
							</h:panelGrid>
						</t:div>

						<t:htmlTag value="div" style="height: 5px;" />

						<h:outputLabel value="#{msgs['CENTRE.TYPE_CENTRE']} *"
							for="critereGestion" />
						<h:panelGrid
							columns="2">
							<h:selectOneMenu id="critereGestion"
								value="#{centreController.centre.niveauCentre}" required="true"
								converter="#{niveauCentreConverter}"
								requiredMessage="#{requiredMessageController.champObligatoire}">
								<f:selectItems value="#{centreController.niveauxCentre}" />
							</h:selectOneMenu>
							<p:message for="critereGestion">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>
						</h:panelGrid>

						<t:htmlTag value="div" style="height: 5px;" />

						<h:panelGrid
							
							rendered="#{centreController.confidentialiteAffichable}">
							<h:outputLabel value="#{msgs['CENTRE.CONFIDENTIALITE']} *"
								for="confidentialite" />
							<h:panelGrid
								columns="2">
								<h:selectOneMenu id="confidentialite"
									value="#{centreController.centre.confidentialite}"
									required="true" converter="#{confidentialiteConverter}"
									requiredMessage="#{requiredMessageController.champObligatoire}">
									<f:selectItems value="#{centreController.confidentialites}" />
								</h:selectOneMenu>
								<p:message for="confidentialite">
									<ui:include src="../_commun/_messageErrorMarker.xhtml" />
								</p:message>
							</h:panelGrid>
						</h:panelGrid>

<!-- 						<t:htmlTag value="div" style="height: 5px;" /> -->

<!-- 						<h:panelGrid -->
<!-- 							> -->
<!-- 							<h:outputLabel value="#{msgs['CENTRE.MODEVALIDATIONSTAGE']} *" -->
<!-- 								for="modeValidationStage" /> -->
<!-- 							<h:panelGrid -->
<!-- 								columns="2"> -->
<!-- 								<h:selectOneMenu id="modeValidationStage" -->
<!-- 									value="#{centreController.centre.modeValidationStage}" -->
<!-- 									required="true" converter="#{modeValidationStageConverter}" -->
<!-- 									requiredMessage="#{requiredMessageController.champObligatoire}"> -->
<!-- 									<f:selectItems value="#{nomenclatureController.modeValidationStages}" /> -->
<!-- 								</h:selectOneMenu> -->
<!-- 								<p:message for="modeValidationStage"> -->
<!-- 									<ui:include src="../_commun/_messageErrorMarker.xhtml" /> -->
<!-- 								</p:message> -->
<!-- 							</h:panelGrid> -->
<!-- 						</h:panelGrid> -->

						<t:htmlTag value="div" style="height: 5px;" />
						
						<h:outputLabel value="#{msgs['CENTRE.TUTEUR_ENS_OBLIGATOIRE']} *"
							for="tuteurEnsObligatoire" />
						<h:selectOneRadio id="tuteurEnsObligatoire"
							value="#{centreController.centre.presenceTuteurEns}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>
						<t:htmlTag value="div" style="height: 5px;" />
						<h:outputLabel value="#{msgs['CENTRE.TUTEUR_PRO_OBLIGATOIRE']} *"
							for="tuteurProObligatoire" />
						<h:selectOneRadio id="tuteurProObligatoire"
							value="#{centreController.centre.presenceTuteurPro}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>
						<t:htmlTag value="div" style="height: 5px;" />
						<h:outputLabel value="#{msgs['CENTRE.SAISIE_EN_LIGNE']} *"
							for="saisieEnLigne" />
						<h:selectOneRadio id="saisieEnLigne"
							value="#{centreController.centre.saisieTuteurProParEtudiant}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>
						<t:htmlTag value="div" style="height: 5px;" />
<!-- 						<h:outputLabel value="#{msgs['CENTRE.MOIS_PRECEDENT']} *" -->
<!-- 							for="moisPrecedent" /> -->
<!-- 						<h:selectOneRadio id="moisPrecedent" -->
<!-- 							value="#{centreController.centre.choixAnneeAvantDebutAnnee}"> -->
<!-- 							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" /> -->
<!-- 							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" /> -->
<!-- 						</h:selectOneRadio> -->
<!-- 						<t:htmlTag value="div" style="height: 5px;" /> -->
<!-- 						<h:outputLabel value="#{msgs['CENTRE.MOIS_SUIVANT']} *" -->
<!-- 							for="moisSuivant" /> -->
<!-- 						<h:selectOneRadio id="moisSuivant" -->
<!-- 							value="#{centreController.centre.choixAnneeApresDebutAnnee}"> -->
<!-- 							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" /> -->
<!-- 							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" /> -->
<!-- 						</h:selectOneRadio> -->
						<h:outputLabel value="#{msgs['CENTRE.IMPRESSIONCONVENTION']} *"
							for="impressionConvention"
							rendered="#{sessionController.autoriserCentresBloquerImpressionConvention}" />
						<h:selectOneRadio id="impressionConvention"
							rendered="#{sessionController.autoriserCentresBloquerImpressionConvention}"
							value="#{centreController.centre.autoriserImpressionConvention}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>
						
						<h:outputLabel value="#{msgs['CENTRE.CREATIONCONVENTION']} *"
							for="creationConvention" />
						<h:selectOneRadio id="creationConvention"
							value="#{centreController.centre.autorisationEtudiantCreationConvention}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>

						<h:outputLabel value="Validation Pedagogique *"
							for="validationPedagogique"
							rendered="#{sessionController.validationPedagogique}" />
						<h:selectOneRadio id="validationPedagogique"
							rendered="#{sessionController.validationPedagogique}"
							value="#{centreController.centre.validationPedagogique}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>
						
						<h:outputLabel value="#{msgs['CENTRE.VISIBILITE_EVAL_TUTEURPRO']} *"
							for="visibiliteEvalPro" />
						<h:selectOneRadio id="visibiliteEvalPro"
							value="#{centreController.centre.visibiliteEvalPro}">
							<f:selectItem itemLabel="#{msgs['FORM.OUI']}" itemValue="true" />
							<f:selectItem itemLabel="#{msgs['FORM.NON']}" itemValue="false" />
						</h:selectOneRadio>
					</h:panelGrid>
					
					<t:htmlTag value="center">
						<h:commandButton action="#{centreController.modifierCentre}"
							style="font-size:16px; border-color:green;"
							value="#{msgs['FORM.MODIFIER']}" />
					</t:htmlTag>

					<t:htmlTag value="center">
						<h:outputText id="erreurModifCentre" value="" />
						<p:message for="erreurModifCentre" />
					</t:htmlTag>
				</h:panelGrid>
			</h:form>
			<ui:include src="./_panel_rechercheViseur.xhtml" />
		</p:panel>
		<t:div
			rendered="#{!(welcomeController.superAdmin	
		|| welcomeController.admin)}">
			<ui:include src="./_redirection_droitsInsuffisants.xhtml" />
		</t:div>
		<t:div
			rendered="#{(welcomeController.superAdmin	
		|| welcomeController.admin)
		and centreController.centre == null}">
			<ui:include src="./_redirection_accesDirectImpossible.xhtml" />
		</t:div>
	</ui:define>
</ui:composition>
