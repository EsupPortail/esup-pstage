<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui"
	template="/stylesheets/_definedStageTemplate.xhtml">
	<ui:define name="content">
		<ui:include src="_roadmapSel.xhtml" />
		<p:panel>
			<f:facet name="header">
				<h:outputText value="#{msgs['CONVENTION.TITRE.DETAIL']}" />
			</f:facet>
			<h:form id="formSelConvention">
				<h:panelGrid
					style="width:800px;position:relative;margin-left:auto;margin-right:auto;">
					<p:panel>
						<f:facet name="header">
							<h:outputText value="#{msgs['CONVENTION.ETAPE2.RECHETAB']}" />
						</f:facet>

						<t:htmlTag value="div" style="height: 10px;" />

						<ui:include
							src="../_commun/_rechercheEtablissementLiensOnglets.xhtml" />

						<t:htmlTag value="center">
							<t:htmlTag value="div" style="height: 20px;" />
							<t:htmlTag value="div"
								style="width:50%; lineType:beveled; height: 4px;"
								styleClass="spacer" />
							<t:htmlTag value="div" style="height: 20px;" />
						</t:htmlTag>

						<ui:include src="../_commun/_rechercheEtablissementOnglets.xhtml" />

						<h:panelGrid id="formResultatsRechEtab">
							<t:div
								rendered="#{not empty rechercheController.ongletCourant 
					and rechercheController.ongletCourant!=6}">
								<h:outputText value="#{msgs['STRUCTURE.AJOUT.CREER']}"
									escape="false"
									rendered="#{rechercheController.afficherBoutonAjoutEtab}" />
								<h:commandLink id="ajoutEtab"
									action="#{conventionController.goToConventionEtape2CreaEtab}"
									rendered="#{rechercheController.afficherBoutonAjoutEtab}">
									<h:graphicImage alt="#{msgs['FORM.CREER']}"
										value="../../media/images/new.png" />
									<p:tooltip value="#{msgs['FORM.CREER']}" />
								</h:commandLink>
							</t:div>
							<t:htmlTag value="div" style="height: 20px;" />
							<p:message for="formResultatsRechEtab">
								<ui:include src="../_commun/_messageErrorMarker.xhtml" />
							</p:message>
							<p:outputPanel id="opRechercheStructureDataTable">
								<t:div
									rendered="#{not empty rechercheController.listeResultatsRechercheStructure
					and not empty rechercheController.rechercheStructurePaginator}">
									<ui:include
										src="../_commun/_rechercheEtablissementNbResultats.xhtml" />
									<p:dataTable id="rechercheStructureDataTable"
										style="width:600px;"
										value="#{rechercheController.rechercheStructurePaginator.liste}"
										var="varRechercheStructure" rows="15" rowHover="true"
										rowStyleClass="nopointer" paginator="true"
										paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
										rowsPerPageTemplate="5,10,15,20"
										rendered="#{not empty rechercheController.rechercheStructurePaginator.liste}">
										<f:facet name="header">
											<h:panelGroup>
												<ui:include
													src="../_commun/_rechercheEtablissementResultatsHeaders.xhtml" />
											</h:panelGroup>
										</f:facet>
										<ui:include
											src="../_commun/_rechercheEtablissementResultatsColumns.xhtml" />
										<p:column>
											<p:commandButton id="selectionEtab"
												value="#{msgs['FORM.SELECTIONNER']}"
												action="#{conventionController.goToConventionEtape2DetailsEtab}"
												image="../../media/images/tick.png"
												alt="#{msgs['FORM.SELECTIONNER']}"
												title="#{msgs['FORM.SELECTIONNER']}">
												<f:setPropertyActionListener
													value="#{varRechercheStructure}"
													target="#{rechercheController.resultatRechercheStructure}" />
												<f:setPropertyActionListener
													value="#{varRechercheStructure}"
													target="#{conventionController.convention.structure}" />
												<p:tooltip value="#{msgs['FORM.SELECTIONNER']}" />
											</p:commandButton>
										</p:column>
									</p:dataTable>
								</t:div>
							</p:outputPanel>
						</h:panelGrid>
					</p:panel>
				</h:panelGrid>
			</h:form>
		</p:panel>
	</ui:define>
</ui:composition>