<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	
	xmlns:t="http://myfaces.apache.org/tomahawk">

	<t:htmlTag value="div" style="height: 20px;" />
	<h:outputLabel for="divCommentaire" value="Commentaire sur le stage : " />
	<t:div
		rendered="#{welcomeController.etudiant || sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitLecture}">
		<h:outputText
			rendered="#{empty conventionController.convention.commentaireStage}"
			value="Aucun commentaire saisi." />
		<h:outputText escape="false"
			rendered="#{not empty conventionController.convention.commentaireStage}"
			value="#{conventionController.convention.commentaireStage}" />
	</t:div>
	<t:div id="divCommentaire"
		rendered="#{sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitAdmin || sessionController.droitsAccesMap[conventionController.convention.idCentreGestion] == beanUtils.droitEcriture}">
		<h:panelGrid  style="margin-left:30;"
			rendered="#{conventionController.convention.validationConvention}">
			<h:outputText escape="false"
				rendered="#{not empty conventionController.convention.commentaireStage}"
				value="#{conventionController.convention.commentaireStage}" />
			<h:outputText
				rendered="#{empty conventionController.convention.commentaireStage}"
				value="Aucun commentaire enregistre." />
		</h:panelGrid>
		<h:panelGrid  style="margin-left:30;"
			rendered="#{!conventionController.convention.validationConvention}">
			<t:htmlTag value="div" style="height: 10px;" />
			<p:editor id="commentaireStage"
				value="#{conventionController.convention.commentaireStage}"
				width="400" height="200" />
			<t:htmlTag value="div" style="height: 10px;" />
			<h:panelGrid  align="center">
				<p:commandButton
					action="#{conventionController.ajouterCommentaireStage}"
					oncomplete="PF('popup').show();"
					update="formCommentaire" value="Enregistrer" alt="Enregistrer" />
			</h:panelGrid>
		</h:panelGrid>
		<p:dialog id="popup" widgetVar="popup">
			<f:facet name="header">
				<h:outputText value="#{msgs['FORM.CONFIRMATION']}" />
			</f:facet>
			<center>
				<p:message style="font-weight:bold;" for="formCommentaire">
					<f:facet name="infoMarker">
						<h:graphicImage value="../../media/images/tick.png"
							title="#{msgs['FORM.CONFIRMATION']}" />
					</f:facet>
				</p:message>
			</center>
			<h:panelGrid  align="center">
				<t:htmlTag value="div" style="height: 10px;" />
				<p:commandButton value="#{msgs['GENERAL.OK']}" 
					immediate="true"
					onclick="PF('popup').hide();" />
			</h:panelGrid>
		</p:dialog>
	</t:div>
</ui:composition>