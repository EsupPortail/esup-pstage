<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui"
	
	template="/stylesheets/_definedStageTemplate.xhtml">
	<ui:define name="content">
		<p:panel
			rendered="#{welcomeController.superAdmin
								|| welcomeController.admin
								|| welcomeController.writer}">
			<f:facet name="header">
				<h:outputText
					value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.HEADER']}" />
			</f:facet>
			<p:outputPanel ajaxRendered="true">
				<h:form id="formRechConvention">
					<t:fieldset style="width:50%;">
						<legend>
							<h:outputLabel for="formRechConvention"
								value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE']}" />
						</legend>
						<h:panelGrid
							>
							<ui:include src="/stylesheets/stage/_limitesResultats.xhtml" />
							<t:htmlTag value="div" style="height: 10px;" />
							<h:panelGrid
								columns="5" align="center">
								<p:commandButton
									value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.BTN_TUTEUR']}"
									disabled="#{conventionController.ongletCourant == 1}"
									update="formRechConvention"
									action="#{conventionController.ongletTuteur}" />
								<t:htmlTag value="div" style="width: 10px;" />
								<p:commandButton
									value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.BTN_UFR']}"
									disabled="#{conventionController.ongletCourant == 2}"
									update="formRechConvention"
									action="#{conventionController.ongletUfr}" />
								<t:htmlTag value="div" style="width: 10px;" />
								<p:commandButton
									value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.BTN_ETAPE']}"
									disabled="#{conventionController.ongletCourant == 3}"
									update="formRechConvention"
									action="#{conventionController.ongletEtape}" />
							</h:panelGrid>
							<t:htmlTag value="div" style="height: 10px;" />
							<h:outputText escape="false"
								rendered="#{!sessionController.validationPedagogique}"
								value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.INFO']}">
								<h:graphicImage alt="avertissement"
									value="../../media/images/information.png" />
							</h:outputText>
							<h:outputText escape="false"
								rendered="#{sessionController.validationPedagogique}"
								value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.INFO_PEDAGO']}">
								<h:graphicImage alt="avertissement"
									value="../../media/images/information.png" />
							</h:outputText>
							<t:htmlTag value="div" style="height:10px;" />
						</h:panelGrid>
						<t:htmlTag value="center">
							<t:htmlTag value="div"
								style="width: 50%; lineType:beveled; height: 4px;"
								styleClass="spacer" />
						</t:htmlTag>
						<t:htmlTag value="div" style="height: 20px;" />
						<h:panelGrid
							>
							<t:div id="panelTuteur"
								rendered="#{conventionController.ongletCourant == 1}">
								<h:outputLabel for="panelTuteur"
									value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.LIBELLE_TUTEUR']}" />
								<h:panelGrid
									columns="2" align="center"
									style="padding-top:15px;">
									<h:outputLabel value="#{msgs['CONVENTION.NOM']}"
										for="nomEnseignant" />
									<h:inputText id="nomEnseignant" size="50" maxlength="30"
										style="text-transform:uppercase;"
										value="#{conventionController.critereRechercheConvention.nomEnseignant}">
										<f:converter binding="#{sansAccentEnMAJConverter}" />
									</h:inputText>

									<t:htmlTag value="div" style="height: 5px;" />
									<t:htmlTag value="div" style="height: 5px;" />

									<h:outputLabel value="#{msgs['CONVENTION.PRENOM']}"
										for="prenomEnseignant" />
									<h:inputText id="prenomEnseignant" size="50" maxlength="30"
										style="text-transform:uppercase;"
										value="#{conventionController.critereRechercheConvention.prenomEnseignant}">
										<f:converter binding="#{sansAccentEnMAJConverter}" />
									</h:inputText>
								</h:panelGrid>
							</t:div>

							<t:div id="panelUfr"
								rendered="#{conventionController.ongletCourant == 2}">
								<h:outputLabel for="panelUfr"
									value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.LIBELLE_UFR']}" />
								<t:htmlTag value="center">
									<t:htmlTag value="div" style="height: 20px;" />
									<h:selectManyMenu
										value="#{conventionController.critereRechercheConvention.idsUfrs}"
										rendered="#{not empty conventionController.rechUfrs}"
										style="height:100px;">
										<f:selectItems value="#{conventionController.rechUfrs}" />
									</h:selectManyMenu>
									<h:outputText rendered="#{empty conventionController.rechUfrs}"
										value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.UFR_VIDE']}" />
								</t:htmlTag>
							</t:div>

							<t:div id="panelEtape"
								rendered="#{conventionController.ongletCourant == 3}">
								<h:outputLabel for="panelEtape"
									value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.LIBELLE_ETAPE']}" />
								<t:htmlTag value="center">
									<t:htmlTag value="div" style="height: 20px;" />
									<h:selectManyMenu
										value="#{conventionController.critereRechercheConvention.idsEtapes}"
										rendered="#{not empty conventionController.rechEtapes}"
										style="height:100px;">
										<f:selectItems value="#{conventionController.rechEtapes}" />
									</h:selectManyMenu>
									<h:outputText
										rendered="#{empty conventionController.rechEtapes}"
										value="#{msgs['CONVENTION.VALIDATION_EN_MASSE.RECHERCHE.ETAPE_VIDE']}" />
								</t:htmlTag>
							</t:div>
						</h:panelGrid>
						<t:htmlTag value="div" style="height:10px;" />
						<t:htmlTag value="center">
							<p:commandButton id="recherche" status="statusRechercheMasse"
								action="#{conventionController.rechercherMasseConvention}"
								value="#{msgs['RECHERCHECONVENTION.RECHERCHER']}" />
							<p:ajaxStatus name="statusRechercheMasse">
								<f:facet name="start">
									<ui:include src="../_commun/_veuillezPatienter.xhtml" />
								</f:facet>
							</p:ajaxStatus>
						</t:htmlTag>
					</t:fieldset>
				</h:form>
			</p:outputPanel>
			<p:message for="formRechConvention"
				style="color:red;font-weight:bold;">
				<ui:include src="../_commun/_messageErrorMarker.xhtml" />
			</p:message>
		</p:panel>
		<t:div
			rendered="#{!(welcomeController.superAdmin	
								|| welcomeController.admin
								|| welcomeController.writer)}">
			<ui:include src="./_redirection_droitsInsuffisants.xhtml" />
		</t:div>
	</ui:define>
</ui:composition>