<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:p="http://primefaces.org/ui"
                template="/stylesheets/_definedStageTemplate.xhtml">
    <ui:define name="content">
        <p:panel>
            <f:facet name="header">
                <h:outputText value="#{msgs['OFFRE.RECAPITULATIF']}" />
            </f:facet>
            <t:div styleClass="mt20 ml30 block">
                <t:div rendered="#{empty offreController.currentOffre}">
                    <h:outputText value="#{msgs['OFFRE.GESTION.AUCUNEOFFRESEL']}" />
                </t:div>
                <h:form>
                    <p:commandButton id="editoffre" action="#{offreController.editPdfOffre}"
                                     value="#{msgs['OFFRE.GESTION.IMPRESSION']}"
                                     icon="fa fa-print" escape="false"/>

                    <t:htmlTag value="div" style="height: 10px;" />

                    <t:div rendered="#{not empty offreController.currentOffre
                            and (welcomeController.superAdmin || welcomeController.admin || welcomeController.writer || welcomeController.reader)}">
                        <fieldset>
                            <legend>
                                <t:div styleClass="verticalAlignDiv fontBold fontBlue2 fz13">
                                    <t:htmlTag value="i" styleClass="fa fa-gear fz16" />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:outputText value="#{msgs['OFFRE.GESTION.CENTREGESTION']} "/>
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:commandLink id="modifCentre"
                                                   rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                                   action="#{offreController.goToModificationOffreEtabCentre}"
                                                   disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontGreen"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontDarkGray" style="opacity:.50;"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <f:setPropertyActionListener
                                                value="recapitulatifOffreEtabCentre"
                                                target="#{offreController.retour}" />
                                        <f:setPropertyActionListener value="_modificationOffreEtape01Centre"
                                                                     target="#{sessionController.modificationOffreCurrentPage}" />
                                        <f:setPropertyActionListener value="#{3}"
                                                                     target="#{offreController.typeAjoutModifOffre}" />
                                        <p:tooltip value="#{msgs['FORM.MODIFIER']}" for="modifCentre"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <p:tooltip value="#{msgs['OFFRE.ERREUR.NOMODIF']}" for="modifCentre"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                    </h:commandLink>
                                </t:div>
                            </legend>
                            <t:htmlTag value="div" style="height:10px;" />
                            <h:outputText
                                    value="(#{offreController.currentOffre.centreGestion.idCentreGestion}) #{offreController.currentOffre.centreGestion.nomCentre}"
                                    rendered="#{not empty offreController.currentOffre.centreGestion}" />
                            <t:htmlTag value="div" style="height:10px;" />
                        </fieldset>

                        <t:htmlTag value="div" style="height: 10px;" />

                        <fieldset>
                            <legend>
                                <t:div styleClass="verticalAlignDiv fontBold fontBlue2 fz13">
                                    <t:htmlTag value="i" styleClass="fa fa-building fz16" />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:outputText value="#{msgs['OFFRE.GESTION.ETABLISSEMENT']} " />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:commandLink id="modifEtab"
                                                   action="#{offreController.goToModificationOffreEtabCentre}"
                                                   rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                                   disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontGreen"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontDarkGray" style="opacity:.50;"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <f:setPropertyActionListener
                                                value="recapitulatifOffreEtabCentre"
                                                target="#{offreController.retour}" />
                                        <f:setPropertyActionListener value="#{3}"
                                                                     target="#{offreController.typeAjoutModifOffre}" />
                                        <f:setPropertyActionListener value="_modificationOffreEtape04DetailsEtab"
                                                                     target="#{sessionController.modificationOffreCurrentPage}" />
                                        <p:tooltip value="#{msgs['FORM.MODIFIER']}" for="modifEtab"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <p:tooltip value="#{msgs['OFFRE.ERREUR.NOMODIF']}" for="modifEtab"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                    </h:commandLink>
                                </t:div>
                            </legend>
                            <ui:include src="/stylesheets/_commun/_detailsOffreEtab.xhtml" />
                        </fieldset>

                        <t:htmlTag value="div" style="height: 20px;" />

                        <fieldset>
                            <legend>
                                <t:div styleClass="verticalAlignDiv fontBold fontBlue2 fz13">
                                    <t:htmlTag value="i" styleClass="fa fa-list fz16" />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:outputText value="#{msgs['OFFRE.GESTION.DETAILS']} "/>
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:commandLink id="modif"
                                                   action="#{offreController.goToModificationOffreEtabCentre}"
                                                   rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                                   disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontGreen"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontDarkGray" style="opacity:.50;"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <f:setPropertyActionListener
                                                value="recapitulatifOffreEtabCentre"
                                                target="#{offreController.retour}" />
                                        <f:setPropertyActionListener value="#{3}"
                                                                     target="#{offreController.typeAjoutModifOffre}" />
                                        <f:setPropertyActionListener value="_modificationOffreEtape1"
                                                                     target="#{sessionController.modificationOffreCurrentPage}" />
                                        <p:tooltip value="#{msgs['FORM.MODIFIER']}" for="modif"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <p:tooltip value="#{msgs['OFFRE.ERREUR.NOMODIF']}" for="modif"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                    </h:commandLink>
                                </t:div>
                            </legend>
                            <ui:include src="/stylesheets/_commun/_detailsOffre.xhtml" />
                        </fieldset>

                        <t:htmlTag value="div" style="height: 20px;" />

                        <fieldset rendered="#{offreController.currentOffre.avecFichier || offreController.currentOffre.avecLien}">
                            <legend>
                                <t:div styleClass="verticalAlignDiv fontBold fontBlue2 fz13">
                                    <t:htmlTag value="i" styleClass="fa fa-file-code-o fz16" />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:outputText value="#{msgs['OFFRE.GESTION.FICHIERLIENATTACHE']} " />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:commandLink id="modifF"
                                                   action="#{offreController.goToModificationOffreEtabCentre}"
                                                   rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                                   disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontGreen"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontDarkGray" style="opacity:.50;"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <f:setPropertyActionListener
                                                value="recapitulatifOffreEtabCentre"
                                                target="#{offreController.retour}" />
                                        <f:setPropertyActionListener value="#{3}"
                                                                     target="#{offreController.typeAjoutModifOffre}" />
                                        <f:setPropertyActionListener value="_modificationOffreEtape3"
                                                                     target="#{sessionController.modificationOffreCurrentPage}" />
                                        <p:tooltip value="#{msgs['FORM.MODIFIER']}" for="modifF"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <p:tooltip value="#{msgs['OFFRE.ERREUR.NOMODIF']}" for="modifF"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                    </h:commandLink>
                                </t:div>
                            </legend>
                            <ui:include src="/stylesheets/_commun/_detailsOffreFichier.xhtml" />
                        </fieldset>

                        <t:htmlTag value="div" style="height: 20px;" />

                        <fieldset rendered="#{(!offreController.currentOffre.avecFichier and !offreController.currentOffre.avecLien
										and offreController.currentOffre.centreGestion.codeConfidentialite==beanUtils.confidentialiteNulle.code)
										|| (welcomeController.superAdmin || welcomeController.admin || welcomeController.writer || welcomeController.reader)}">
                            <legend>
                                <t:div styleClass="verticalAlignDiv fontBold fontBlue2 fz13">
                                    <t:htmlTag value="i" styleClass="fa fa-user fz16" />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:outputText value="#{msgs['OFFRE.GESTION.CONTACTS']} " />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:commandLink id="modifC"
                                                   action="#{offreController.goToModificationOffreEtabCentre}"
                                                   rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                                   disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontGreen"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <t:htmlTag value="i" styleClass="fa fa-edit fz16 fontDarkGray" style="opacity:.50;"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <f:setPropertyActionListener
                                                value="recapitulatifOffreEtabCentre"
                                                target="#{offreController.retour}" />
                                        <f:setPropertyActionListener value="#{3}"
                                                                     target="#{offreController.typeAjoutModifOffre}" />
                                        <f:setPropertyActionListener value="_modificationOffreEtape3Contacts"
                                                                     target="#{sessionController.modificationOffreCurrentPage}" />
                                        <p:tooltip value="#{msgs['FORM.MODIFIER']}" for="modifC"
                                                   rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                        <p:tooltip value="#{msgs['OFFRE.ERREUR.NOMODIF']}" for="modifC"
                                                   rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                    </h:commandLink>
                                </t:div>
                            </legend>
                            <ui:include src="/stylesheets/_commun/_detailsOffreContacts.xhtml" />
                        </fieldset>

                        <t:htmlTag value="div" style="height: 20px;" />

                        <fieldset>
                            <legend>
                                <t:div styleClass="verticalAlignDiv fontBold fontBlue2 fz13">
                                    <t:htmlTag value="i" styleClass="fa fa-rss fz16" />
                                    <t:htmlTag value="div" style="width:5px;" />
                                    <h:outputText value="#{msgs['OFFRE.DIFFUSION']}"
                                                  styleClass="fontBold"/>
                                </t:div>
                            </legend>
                            <ui:include src="/stylesheets/_commun/_detailsOffreDiffusion.xhtml" />
                        </fieldset>

                        <t:htmlTag value="div" style="height: 5px;" />

                        <t:div styleClass="floatRight"
                               rendered="#{!offreController.currentOffre.estSupprimee}">

                            <p:commandLink id="suppr" update="supprOffre" styleClass="verticalAlignDiv"
                                           oncomplete="PF('supprOffre').show();"
                                           rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                           disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                <t:htmlTag value="i" styleClass="fa fa-trash-o fz16 fontBlue2"
                                           rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                <t:htmlTag value="i" styleClass="fa fa-trash-o fz16 fontBlue2" style="opacity:.50;"
                                           rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                <f:setPropertyActionListener value="resultatsRechercheOffre"
                                                             target="#{offreController.retour}" />
                                <f:setPropertyActionListener value="_supprOffreEtape1"
                                                             target="#{sessionController.suppressionOffreCurrentPage}" />
                                <h:outputText value=" #{msgs['OFFRE.SUPPRIMER']}" />
                                <p:tooltip for="suppr" value="#{msgs['FORM.SUPPRIMER']}"
                                           rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                <p:tooltip for="suppr" value="#{msgs['OFFRE.ERREUR.NOSUPPR']}"
                                           rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                            </p:commandLink>
                        </t:div>

                        <t:div styleClass="floatRight mr5">
                            <p:commandLink id="transfert" styleClass="verticalAlignDiv"
                                           oncomplete="PF('panelTransfertOffre').show();"
                                           rendered="#{welcomeController.superAdmin || welcomeController.admin || welcomeController.writer}"
                                           disabled="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}">
                                <t:htmlTag value="i" styleClass="fa fa-external-link fz16 fontBlue2"
                                           rendered="#{offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                <t:htmlTag value="i" styleClass="fa fa-external-link fz16 fontBlue2" style="opacity:.50;"
                                           rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                                <h:outputText value=" #{msgs['OFFRE.TRANSFERT']}" />

                                <p:tooltip for="transfert" value="#{msgs['OFFRE.ERREUR.NOTRANSFERT']}"
                                           rendered="#{!offreController.listeCurrentIdsCentresGestionContainsIdCGCurrentOffre}" />
                            </p:commandLink>
                        </t:div>
                        <t:div styleClass="floatRight mr5">
                            <t:aliasBean alias="#{objet}"
                                         value="#{offreController.currentOffre}">
                                <ui:include src="/stylesheets/_commun/_updateInfos.xhtml" />
                            </t:aliasBean>
                        </t:div>
                    </t:div>
                    <t:div rendered="#{!(welcomeController.superAdmin || welcomeController.admin || welcomeController.writer || welcomeController.reader)}">
                        <t:div styleClass="textCenter">
                            <h:outputText value="#{offreController.currentOffre.intitule}"
                                          styleClass="fontBold fz20"
                                          style="text-transform:uppercase;" />
                        </t:div>
                        <t:div styleClass="block">
                            <t:div rendered="#{!offreController.currentOffre.cacherEtablissement}">
                                <h:outputText value="#{msgs['RECHERCHEOFFRE.RECAPETUDIANT.ETAB']} " />

                                <ui:include src="/stylesheets/_commun/_detailsOffreEtab.xhtml" />

                                <t:htmlTag value="div" style="height: 10px;" />
                            </t:div>

                            <ui:include src="/stylesheets/_commun/_detailsOffreEtudiant.xhtml" />

                        </t:div>
                    </t:div>
                    <t:htmlTag value="div" style="height: 20px;" />
                    <t:div>
                        <p:commandButton immediate="true" update="@form"
                                         value="#{msgs['RECHERCHEOFFRE.RETOURAUXRESULTATS']}"
                                         action="resultatsRechercheOffre" />
                        <p:commandButton immediate="true" update="@form" styleClass="ml20"
                                         value="#{msgs['RECHERCHEOFFRE.NOUVELLERECHERCHER']}"
                                         icon="fa fa-angle-double-left"
                                         action="#{offreController.goToRechercheOffreStage}" />
                    </t:div>
                </h:form>
            </t:div>
            <ui:include src="/stylesheets/_commun/_panelDiffusionOffre.xhtml" />
            <ui:include src="/stylesheets/_commun/_panelStopDiffusionOffre.xhtml" />
            <ui:include src="/stylesheets/_commun/_panelOffrePourvue.xhtml" />
            <ui:include src="/stylesheets/_commun/_panelTransfertOffre.xhtml" />
            <ui:include src="/stylesheets/_commun/_panelDiffusionCentreOffre.xhtml" />
            <ui:include src="/stylesheets/_commun/_panelSupprOffre.xhtml" />
        </p:panel>
        <t:htmlTag value="div" style="height: 50px;" />
    </ui:define>
</ui:composition>
