<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui">

	<h:form id="formListePersonnel">
		<h:panelGrid rendered="#{centreController.listePersonnelVide}">
			<h:outputText value="#{msgs['CENTRE.PERSONNEL.LISTE.VIDE']}" />
		</h:panelGrid>
		<h:panelGrid rendered="#{!centreController.listePersonnelVide}">
			<p:dataTable id="listePersonnels"
				style="width:483px; border-right:1px solid #C0C0C0;"
				value="#{centreController.personnels}" var="personnel" rows="20"
				rowHover="true" rowStyleClass="nopointer" paginator="true"
				paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="5,10,15,20">
				<p:column>
					<f:facet name="header">
						<h:outputText style="width:50px; display:block;"
							value="#{msgs['CENTRE.PERSONNEL.CIVILITE']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.civilite.libelle}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText style="width:100px; display:block;"
							value="#{msgs['CENTRE.PERSONNEL.NOM']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.nom}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText style="width:100px; display:block;"
							value="#{msgs['CENTRE.PERSONNEL.PRENOM']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.prenom}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText style="width:150px; display:block;"
							value="#{msgs['CENTRE.PERSONNEL.COMPOSANTE']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.affectation.libelle}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText style="width:75px; display:block;"
							value="#{msgs['CENTRE.PERSONNEL.AJOUT.DROIT']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText value="#{personnel.droitAdmin.libelle}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msgs['CENTRE.PERSONNEL.ALERTES_MAIL']}" />
					</f:facet>
					<t:htmlTag value="center">
						<h:outputText rendered="#{personnel.alertesMail}"
							value="#{msgs['FORM.OUI']}" />
						<h:outputText rendered="#{!personnel.alertesMail}"
							value="#{msgs['FORM.NON']}" />
					</t:htmlTag>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="#{msgs['CENTRE.PERSONNEL.DROIT_EVALUATION']}" />
					</f:facet>
					<h:panelGrid align="center">
						<h:outputText rendered="#{personnel.droitEvaluationEtudiant}"
							value="Etudiants" />
						<h:outputText rendered="#{personnel.droitEvaluationEnseignant}"
							value="Enseignants" />
						<h:outputText rendered="#{personnel.droitEvaluationEntreprise}"
							value="Entreprises" />
						<h:outputText
							rendered="#{!personnel.droitEvaluationEtudiant
										and !personnel.droitEvaluationEnseignant
										and !personnel.droitEvaluationEntreprise}"
							value="Aucun" />
					</h:panelGrid>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText style="width:50px; display:block;"
							value="#{msgs['CENTRE.PERSONNEL.ACTIONS']}" />
					</f:facet>
					<t:htmlTag value="center">
						<p:commandLink id="see"
							action="#{centreController.goToVoirPersonnel}">
							<f:setPropertyActionListener value="#{personnel}"
								target="#{centreController.personnel}" />
							<h:graphicImage alt="#{msgs['FORM.VOIR']}"
								value="../../media/images/zoom.png" />
							<p:tooltip value="#{msgs['FORM.VOIR']}" />
						</p:commandLink>

						<p:commandLink id="delete"
							rendered="#{welcomeController.superAdmin
													|| sessionController.droitsAccesMap[centreController.centre.idCentreGestion] == beanUtils.droitAdmin}"
							oncomplete="PF('suppressionPersonnel').show();"
							update="suppressionPersonnel">
							<f:setPropertyActionListener value="#{personnel}"
								target="#{centreController.personnel}" />
							<h:graphicImage alt="#{msgs['FORM.SUPPRIMER']}"
								value="../../media/images/delete.png" />
							<p:tooltip value="#{msgs['FORM.SUPPRIMER']}" />
						</p:commandLink>
					</t:htmlTag>
				</p:column>
			</p:dataTable>
		</h:panelGrid>

		<t:htmlTag value="div" style="height:20px;" />

		<t:htmlTag value="center">
			<p:commandButton id="add" status="statusAjout"
				value="#{msgs['CENTRE.PERSONNEL.RATTACHER']}"
				action="#{centreController.goToRattachPersonnelRecherche}"
				style="font-size:16px; font-weight:bold; border-color:green;"
				rendered="#{welcomeController.superAdmin
								|| sessionController.droitsAccesMap[centreController.centre.idCentreGestion] == beanUtils.droitAdmin}" />
			<p:ajaxStatus name="statusAjout">
				<f:facet name="start">
					<ui:include src="../_commun/_veuillezPatienter.xhtml" />
				</f:facet>
			</p:ajaxStatus>
		</t:htmlTag>
		<t:htmlTag value="div" style="height: 20px;" />
	</h:form>
	<ui:include src="./_panel_suppressionPersonnel.xhtml" />
</ui:composition>