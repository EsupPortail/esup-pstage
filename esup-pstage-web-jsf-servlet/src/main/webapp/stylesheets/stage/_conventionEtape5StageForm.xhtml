<%@include file="../_include.jsp"%>


<e:panelGrid columns="3" cellpadding="2" cellspacing="2"
	alternateColors="true">
	<e:outputLabel
		value="#{msgs['CONVENTION.TYPECONVENTION']} #{msgs['CONVENTION.ETOILE']}"
		for="typeConvention" />
	<h:selectOneMenu id="typeConvention"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selTypeConvention}"
		converter="#{typeConventionConverter}">
		<f:selectItems value="#{nomenclatureController.typeConventions}" />
	</h:selectOneMenu>
	<rich:message for="typeConvention">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel
		value="#{msgs['CONVENTION.THEME']} #{msgs['CONVENTION.ETOILE']}"
		for="theme" />
	<h:selectOneMenu id="theme"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selTheme}" converter="#{themeConverter}"
		required="true">
		<f:selectItem itemValue="" />
		<f:selectItems value="#{nomenclatureController.themes}" />
		<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
		<rich:ajaxValidator event="onchange" ignoreDupResponses="true" />
		<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
	</h:selectOneMenu>
	<rich:message for="theme">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel
		value="#{msgs['CONVENTION.SUJET']} #{msgs['CONVENTION.ETOILE']}"
		for="sujetStage" />
	<rich:editor id="sujetStage" viewMode="source"
		value="#{conventionController.convention.sujetStage}" width="400"
		height="100" required="true"
		requiredMessage="#{requiredMessageController.champObligatoire}">
		<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
		<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
	</rich:editor>
	<rich:message for="sujetStage">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="fonctionsEtTaches"
		value="#{msgs['CONVENTION.FONCTION']} #{msgs['CONVENTION.ETOILE']} #{msgs['CONVENTION.FONCTION.APPARAITRA']}" />
	<rich:editor id="fonctionsEtTaches" viewMode="source"
		value="#{conventionController.convention.fonctionsEtTaches}"
		width="400" height="100" required="true"
		requiredMessage="#{requiredMessageController.champObligatoire}">
		<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
		<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
	</rich:editor>
	<rich:message for="fonctionsEtTaches">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="details"
		value="#{msgs['CONVENTION.DETAILS']}" />
	<rich:editor id="details" viewMode="source"
		value="#{conventionController.convention.details}" width="400"
		height="100" />
	<rich:message for="details">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<a4j:outputPanel id="choixAnneeUniv">
		<e:panelGrid columns="2" 
			rendered="#{conventionController.choixAnneeUniv}" >
			<e:outputLabel value="#{msgs['CONVENTION.ANNEEUNIV']}" for="anU" />
			<h:selectOneMenu id="anU"
				value="#{conventionController.selAnneeUniversitaire}">
				<f:selectItems
					value="#{conventionController.listeAnneeUnivConvention}" />
			</h:selectOneMenu>
		</e:panelGrid>
		<rich:spacer height="5" />
	</a4j:outputPanel>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel
		value="#{msgs['CONVENTION.DEBUTSTAGE']} #{msgs['CONVENTION.ETOILE']}"
		for="dateDebutStage" />
	<rich:calendar id="dateDebutStage"
		value="#{conventionController.convention.dateDebutStage}"
		locale="#{sessionController.locale}" popup="true"
		datePattern="dd/MM/yyyy" showApplyButton="false" cellWidth="24px"
		cellHeight="22px" style="width:200px" required="true"
		requiredMessage="#{requiredMessageController.champObligatoire}">
		<a4j:support event="onchanged" reRender="choixAnneeUniv" />
	</rich:calendar>
	<rich:message for="dateDebutStage">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>

	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel
		value="#{msgs['CONVENTION.FINSTAGE']} #{msgs['CONVENTION.ETOILE']}"
		for="dateFinStage" />
	<rich:calendar id="dateFinStage"
		value="#{conventionController.convention.dateFinStage}"
		locale="#{sessionController.locale}" popup="true"
		datePattern="dd/MM/yyyy" showApplyButton="false" cellWidth="24px"
		cellHeight="22px" style="width:200px" required="true"
		requiredMessage="#{requiredMessageController.champObligatoire}" />

	<rich:message for="dateFinStage">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.INTERRUPTION']} "
		for="interruptionStage" />
	<h:selectOneRadio id="interruptionStage"
		value="#{conventionController.convention.interruptionStage}" 
		onclick="#{rich:component('dateDebutInterruption')}.resetSelectedDate(),#{rich:component('dateFinInterruption')}.resetSelectedDate()">
		<f:selectItem itemLabel="oui" itemValue="true" />
		<f:selectItem itemLabel="non" itemValue="false" />
		<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />		
	</h:selectOneRadio>
	<rich:message for="interruptionStage">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.INTERRUPDEBSTAGE']}"
		for="dateDebutInterruption" />
	<rich:calendar id="dateDebutInterruption"
		value="#{conventionController.convention.dateDebutInterruption}"
		locale="#{sessionController.locale}" popup="true"
		datePattern="dd/MM/yyyy" showApplyButton="false" cellWidth="24px"
		cellHeight="22px" style="width:200px" />

	<rich:message for="dateDebutInterruption">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.INTERRUPFINSTAGE']}"
		for="dateFinInterruption" />
	<rich:calendar id="dateFinInterruption"
		value="#{conventionController.convention.dateFinInterruption}"
		locale="#{sessionController.locale}" popup="true"
		datePattern="dd/MM/yyyy" showApplyButton="false" cellWidth="24px"
		cellHeight="22px" style="width:200px" />

	<rich:message for="dateFinInterruption">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.DUREEEXCEPT']}"
		for="dureeExceptionnelle" />
	<e:panelGrid columns="4">
		<h:inputText id="dureeExceptionnelle" 
			value="#{conventionController.convention.dureeExceptionnelle}" >
			<f:validateLength maximum="4"/>
			<f:validateLongRange minimum="1" maximum="9999"/>
		</h:inputText>
		<rich:message for="dureeExceptionnelle">
			<%@include file="../_commun/_messageErrorMarker.jsp"%>
		</rich:message>
		<e:text value="#{msgs['CONVENTION.EN']}" />
		<h:selectOneMenu id="uniteDureeExceptionnelle"
			value="#{conventionController.selUniteDureeExceptionnelle}"
			converter="#{uniteDureeConverter}">
			<f:selectItem itemValue="" />
			<f:selectItems value="#{nomenclatureController.unitesDurees}" />
		</h:selectOneMenu>
		<rich:message for="uniteDureeExceptionnelle">
			<%@include file="../_commun/_messageErrorMarker.jsp"%>
		</rich:message>
	</e:panelGrid>
	<rich:spacer height="10" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel
		value="#{msgs['CONVENTION.NBJOURSHEBDO']} #{msgs['CONVENTION.ETOILE']}"
		for="nbJoursHebdo" />
	<h:selectOneMenu id="nbJoursHebdo"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.convention.nbJoursHebdo}">
		<f:selectItems value="#{conventionController.nbJoursHebdoItems}" />
	</h:selectOneMenu>
	<rich:message for="nbJoursHebdo">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />

	<e:outputLabel
		value="#{msgs['CONVENTION.TEMPSTRAVAIL']} #{msgs['CONVENTION.ETOILE']}"
		for="tempsTravail" />
	<h:selectOneMenu id="tempsTravail"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selTempsTravail}"
		converter="#{tempsTravailConverter}">
		<f:selectItems value="#{nomenclatureController.tempsTravail}" />
	</h:selectOneMenu>
	<rich:message for="tempsTravail">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>

	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="commentaireDureeTravail"
		value="#{msgs['CONVENTION.COMMENTDUREETRAVAIL']}" />
	<rich:editor id="commentaireDureeTravail" viewMode="source"
		value="#{conventionController.convention.commentaireDureeTravail}"
		width="400" height="100">
	</rich:editor>
	<rich:message for="commentaireDureeTravail">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />

	<e:outputLabel
		value="#{msgs['CONVENTION.NBHEURESHEBDO']} #{msgs['CONVENTION.ETOILE']}"
		for="nbHeuresHebdo" />
	<e:inputText id="nbHeuresHebdo"
		value="#{conventionController.convention.nbHeuresHebdo}" />
	<rich:message for="nbHeuresHebdo">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.QUOTITETRAVAIL']}"
		for="quotiteTravail" />
	<e:inputText id="quotiteTravail"
		value="#{conventionController.convention.quotiteTravail}" />
	<rich:message for="quotiteTravail">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel
		value="#{msgs['CONVENTION.INDEMNISATION']} #{msgs['CONVENTION.ETOILE']}"
		for="indemnisation" />
	<h:selectOneMenu id="indemnisation" required="true"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selIndemnisation}"
		converter="#{indemnisationConverter}">
		<a4j:support event="onchange" reRender="opMontantGratificationOblig, opMessageMontantGratificationOblig"
			ignoreDupResponses="true" ajaxSingle="true" />
		<a4j:support event="onkeyup" reRender="opMontantGratificationOblig, opMessageMontantGratificationOblig"
			ignoreDupResponses="true" ajaxSingle="true" />
		<a4j:support event="onblur" reRender="opMontantGratificationOblig, opMessageMontantGratificationOblig"
			ignoreDupResponses="true" ajaxSingle="true" />
		<f:selectItem itemValue="" />
		<f:selectItems value="#{nomenclatureController.indemnisations}" />
	</h:selectOneMenu>
	<rich:message for="indemnisation">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.SIMTGRATIFICATION']}"
		for="montantGratification" />
	<e:panelGrid columns="3">
		<e:panelGrid columns="1">
			<a4j:outputPanel id="opMontantGratificationOblig">
				<h:inputText id="montantGratification"
					required="#{conventionController.selIndemnisation.libelle==beanUtils.indemnisationOui }"
					requiredMessage="#{requiredMessageController.champObligatoire}"
					value="#{conventionController.convention.montantGratification}"
					validatorMessage="#{requiredMessageController.mtGratificationNonValide}">
					<f:validator binding="#{mtGratificationValidator}" />
					<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
				</h:inputText>
			</a4j:outputPanel>
			<rich:message for="montantGratification">
				<%@include file="../_commun/_messageErrorMarker.jsp"%>
			</rich:message>
		</e:panelGrid>
		<e:text value=" en " />
		<e:panelGrid columns="2">
			<h:selectOneMenu id="UniteGratification"
				value="#{conventionController.selUniteGratification}"
				converter="#{uniteGratificationConverter}">
				<f:selectItem itemValue="" />
				<f:selectItems value="#{nomenclatureController.uniteGratifications}" />
			</h:selectOneMenu>
			<rich:message for="UniteGratification">
				<%@include file="../_commun/_messageErrorMarker.jsp"%>
			</rich:message>
		</e:panelGrid>
	</e:panelGrid>
	<rich:spacer height="10" />

	<rich:spacer height="5" />
	<t:panelGroup colspan="4">
		<a4j:outputPanel id="opMessageMontantGratificationOblig">
			<rich:spacer height="5" />
			<t:panelGroup colspan="4"
				rendered="#{conventionController.selIndemnisation.libelle==beanUtils.indemnisationOui }">
				<h:graphicImage id="arrow"
					value="../../media/images/arrow_turn_up.png"
					alt="#{msgs['GENERAL.ARROW_UP']}"
					title="#{msgs['GENERAL.ARROW_UP']}" />
				<rich:spacer width="10px" />
				<e:text
					value="#{msgs['CONVENTION.CREERCONVENTION.MTGRATIFICATION.OBLIGATOIRE']}" />
			</t:panelGroup>
		</a4j:outputPanel>
	</t:panelGroup>

	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="modeVersGratification"
		value="#{msgs['CONVENTION.MODEVERSGRAT']}" />
	<h:selectOneMenu id="modeVersGratification"
		value="#{conventionController.selModeVersGratification}"
		converter="#{modeVersGratificationConverter}">
		<f:selectItems
			value="#{nomenclatureController.modeVersGratifications}" />
	</h:selectOneMenu>
	<rich:message for="modeVersGratification">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.ORIGINESTAGE.COMMENT']}"
		for="origineStage" />
	<h:selectOneMenu id="origineStage"
		value="#{conventionController.selOrigineStage}"
		converter="#{origineStageConverter}">
		<f:selectItem itemValue="" />
		<f:selectItems value="#{nomenclatureController.origineStages}" />
	</h:selectOneMenu>
	<rich:message for="origineStage">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel value="#{msgs['CONVENTION.TEMCONFSUJET']}"
		for="temConfSujetTeme" />
	<h:selectOneRadio id="temConfSujetTeme"
		value="#{conventionController.booltemConfSujetTeme}">
		<f:selectItem itemLabel="oui" itemValue="true" />
		<f:selectItem itemLabel="non" itemValue="false" />
		<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
	</h:selectOneRadio>
	<rich:message for="temConfSujetTeme">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>

	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="modeEncadreSuivi"
		value="#{msgs['CONVENTION.MODESUIVI']}" />
	<rich:editor id="modeEncadreSuivi" viewMode="source"
		value="#{conventionController.convention.modeEncadreSuivi}"
		width="400" height="100">
	</rich:editor>
	<rich:message for="modeEncadreSuivi">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>

	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="avantagesNature"
		value="#{msgs['CONVENTION.AVANTAGESNATURE']}" />
	<rich:editor id="avantagesNature" viewMode="source"
		value="#{conventionController.convention.avantagesNature}" width="400"
		height="100">
	</rich:editor>
	<rich:message for="avantagesNature">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="natureTravail"
		value="#{msgs['CONVENTION.NATURETRAVAIL']}" />
	<h:selectOneMenu id="natureTravail"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selNatureTravail}"
		converter="#{natureTravailConverter}">
		<f:selectItems value="#{nomenclatureController.natureTravails}" />
	</h:selectOneMenu>

	<rich:message for="natureTravail">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="modeValidationStage"
		value="#{msgs['CONVENTION.MODEVALIDSTAGE']}" />
	<h:selectOneMenu id="modeValidationStage"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selModeValidationStage}"
		converter="#{modeValidationStageConverter}">
		<f:selectItems value="#{nomenclatureController.modeValidationStages}" />
	</h:selectOneMenu>
	<rich:message for="modeValidationStage">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="travailNuitFerie"
		value="#{msgs['CONVENTION.TRAVAILNUITFERIE']}" />
	<rich:editor id="travailNuitFerie" viewMode="source"
		value="#{conventionController.convention.travailNuitFerie}"
		width="400" height="100"/>
	<rich:message for="travailNuitFerie">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<rich:spacer height="5" />
	<e:outputLabel for="langueConvention"
		value="#{msgs['CONVENTION.LANGUECONVENTION']}" />
	<h:selectOneMenu id="langueConvention" required="true"
		requiredMessage="#{requiredMessageController.champObligatoire}"
		value="#{conventionController.selLangueConvention}"
		converter="#{langueConventionConverter}">
		<f:selectItems value="#{nomenclatureController.langueConventions}" />
	</h:selectOneMenu>
	<rich:message for="langueConvention">
		<%@include file="../_commun/_messageErrorMarker.jsp"%>
	</rich:message>
</e:panelGrid>




