<ui:include src="../_include.xhtml"/>

<rich:spacer height="20px" />
<rich:spacer height="20px" />
<a4j:commandButton action="#{accordController.goToEtapePrecedente}"
	ignoreDupResponses="true" value="#{msgs['FORM.PREVIOUS']}"
	immediate="true" />
<t:htmlTag value="br" />
<t:htmlTag value="br" />
<h:outputText value="#{msgs['ACCORD.EXISTANT.TITRE']}" />
<t:htmlTag value="br" />
<t:div rendered="#{not empty accordController.accord.structure}">
	<t:div
		style="width:500px;position:relative;margin-left:auto;margin-right:auto;">
		<t:aliasBean alias="#{structure}"
			value="#{accordController.accord.structure}">
			<ui:include src="../_commun/_rechercheEtablissementAffichage.xhtml"/>
		</t:aliasBean>
	</t:div>
	<t:panelGroup colspan="2"
		style="width:500px;position:relative;margin-left:auto;margin-right:auto;">
		<h:outputText value="#{msgs['ACCORD.MODIFICATION']}" escape="false" />
	</t:panelGroup>
	<rich:spacer height="20px" />
	<h2><h:outputText value="#{msgs['ACCORD.EXISTANT']}" escape="false" /></h2>
	<h:panelGrid columns="2" align="center">
		<h:panelGrid columns="1">
		<ui:include src="../_commun/_champsObligatoires.xhtml"/>
			<h:panelGrid columns="3">
				<h:panelGrid columns="1">
					<h:panelGrid columns="2"
						style="margin-left:auto;margin-right:auto;">
						<e:outputLabel value="#{msgs['CONTACT.CIVILITE']} *"
							for="civilite" />
						<h:selectOneMenu id="civilite"
							value="#{accordController.contactDemandeCompte.civilite}"
							converter="#{civiliteConverter}" required="true"
							requiredMessage="#{requiredMessageController.champObligatoire}">
							<f:selectItem itemValue="" />
							<f:selectItems value="#{nomenclatureController.civilites}" />
							<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
							<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
						</h:selectOneMenu>
						<t:panelGroup colspan="2">
							<rich:message for="civilite">
								<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
							</rich:message>
						</t:panelGroup>
					</h:panelGrid>
					<e:outputLabel for="nom" value="#{msgs['CONTACT.NOM']} *" />
					<h:inputText id="nom" style="text-transform:uppercase;"
						value="#{accordController.contactDemandeCompte.nom}" size="50"
						maxlength="50" required="true"
						requiredMessage="#{requiredMessageController.champObligatoire}">
						<f:converter binding="#{upperCaseConverter}" />
						<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
						<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
					</h:inputText>
					<rich:message for="nom">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
					<e:outputLabel for="prenom" value="#{msgs['CONTACT.PRENOM']} *" />
					<h:inputText id="prenom" style="text-transform:capitalize;"
						value="#{accordController.contactDemandeCompte.prenom}" size="50"
						maxlength="50" required="true"
						requiredMessage="#{requiredMessageController.champObligatoire}">
						<f:converter binding="#{premiereLettreMAJConverter}" />
						<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
						<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
					</h:inputText>
					<rich:message for="prenom">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
					<e:outputLabel for="fonction" value="#{msgs['CONTACT.FONCTION']} " />
					<h:inputText id="fonction" size="50" maxlength="100"
						value="#{accordController.contactDemandeCompte.fonction}" />
					<rich:message for="fonction">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
					<e:outputLabel for="nomService" value="#{msgs['SERVICE.NOM']} *" />
					<h:inputText id="nomService" style="text-transform:uppercase;"
						value="#{accordController.contactDemandeCompte.service.nom}"
						size="50" maxlength="50" required="true"
						requiredMessage="#{requiredMessageController.champObligatoire}">
						<f:converter binding="#{upperCaseConverter}" />
						<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
						<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
					</h:inputText>
					<rich:message for="nomService">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
				</h:panelGrid>
				<h:panelGrid columns="3">
					<rich:spacer width="25px" />
					<rich:spacer width="2px"
						style="background-color: #{a4jSkin.panelBorderColor};"
						height="225px" />
					<rich:spacer width="25px" />
				</h:panelGrid>
				<h:panelGrid columns="1">
					<rich:spacer height="25px" />
					<e:outputLabel for="telC" value="#{msgs['CONTACT.TELEPHONE']} *" />
					<h:inputText id="telC"
						value="#{accordController.contactDemandeCompte.tel}" size="20"
						maxlength="20" required="true"
						requiredMessage="#{requiredMessageController.champObligatoire}">
						<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
						<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
					</h:inputText>
					<rich:message for="telC">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
					<e:outputLabel for="faxC" value="#{msgs['CONTACT.FAX']} " />
					<h:inputText id="faxC" size="20" maxlength="20"
						value="#{accordController.contactDemandeCompte.fax}" />
					<rich:message for="faxC">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
					<e:outputLabel for="mailC" value="#{msgs['CONTACT.MAIL']} *" />
					<h:inputText id="mailC"
						value="#{accordController.contactDemandeCompte.mail}" size="50"
						maxlength="50" required="true"
						requiredMessage="#{requiredMessageController.champObligatoire}"
						validatorMessage="#{requiredMessageController.adresseMailNonValide}">
						<f:validator binding="#{mailValidator}" />
						<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
						<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
					</h:inputText>
					<rich:message for="mailC">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
					<e:outputLabel for="mailConfirmation"
						value="#{msgs['CONTACT.MAIL_CONFIRMATION']} *" />
					<h:inputText id="mailConfirmation"
						value="#{accordController.contactMailConfirmation}" size="50"
						maxlength="50" required="true"
						requiredMessage="#{requiredMessageController.champObligatoire}"
						validatorMessage="#{requiredMessageController.adresseMailNonValide}">
						<f:validator binding="#{mailValidator}" />
						<rich:ajaxValidator event="onkeyup" ignoreDupResponses="true" />
						<rich:ajaxValidator event="onblur" ignoreDupResponses="true" />
					</h:inputText>
					<rich:message for="mailConfirmation">
						<ui:include src="../_commun/_messageErrorMarker.xhtml"/>
					</rich:message>
				</h:panelGrid>
			</h:panelGrid>
		</h:panelGrid>
	</h:panelGrid>
	<a4j:commandButton action="#{accordController.validerDemandeCompte}"
		ignoreDupResponses="true" value="#{msgs['FORM.ENVOYER']}" />
</t:div>
