<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	template="_definedStageTemplate.xhtml">
	<ui:define name="content">
		<t:div
			rendered="#{not sessionController.pageAuthorized and not sessionController.adminPageAuthorized}">
			<h:panelGrid columns="1" styleClass="panelEntreprise">
				<h:outputText
					value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.BIENVENUE']}"
					escape="false">
					<f:param value="#{sessionController.applicationNameEntreprise}" />
				</h:outputText>
				<rich:spacer height="20px" />
				<h:outputText value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.ACCUEIL']}"
					escape="false" />
				<rich:spacer height="20px" />
				<rich:panel
					rendered="#{not empty centreController.centreEntreprise}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.AVECCOMPTE']}" />
					</f:facet>
					<h:panelGrid columns="1" align="center">
						<h:panelGrid columns="1" align="center">
							<ui:include src="./_formLogin.jsp" />
							<h:form>
								<h:commandLink value="#{msgs['MOTDEPASSEPERDU.TITRE']}"
									action="#{welcomeController.goToMotDePassePerdu}" />
							</h:form>
						</h:panelGrid>
						<h:panelGrid columns="3" align="center">
							<rich:spacer height="30px" />
							<rich:spacer width="400px"
								style="background-color: #{a4jSkin.panelBorderColor};"
								height="2px" />
							<rich:spacer height="30px" />
						</h:panelGrid>
						<h:panelGrid columns="1" align="center">
							<h:form>
								<h:panelGrid columns="1" align="center">
									<t:div
										rendered="#{sessionController.adminAuthentication == 'cas'}">
										<h:outputLink
											value="#{sessionController.baseUrl}auth/cas/auth.faces">
											<h:outputText
												value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.ADMIN']}" />
										</h:outputLink>
									</t:div>
									<t:div
										rendered="#{sessionController.adminAuthentication == 'shibb'}">
										<h:outputLink
											value="#{sessionController.baseUrl}auth/shibb/auth.faces">
											<h:outputText
												value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.ADMIN']}" />
										</h:outputLink>
									</t:div>
									<h:outputText value="#{msgs['GENERAL.NOTAUTHORIZED']}"
										rendered="#{sessionController.notAdminEntrepriseViaCasShibb}" />
									<h:commandLink
										action="#{welcomeController.disconnectEntreprise}"
										value="#{msgs['GENERAL.DECONNEXION']}" immediate="true"
										rendered="#{sessionController.notAdminEntrepriseViaCasShibb}">
									</h:commandLink>
								</h:panelGrid>
							</h:form>
						</h:panelGrid>
					</h:panelGrid>
				</rich:panel>
				<rich:spacer height="20" />
				<rich:panel
					rendered="#{not empty centreController.centreEntreprise}">
					<f:facet name="header">
						<h:outputText
							value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.SANSCOMPTE']}" />
					</f:facet>
					<h:form>
						<h:commandButton action="#{accordController.goToPreAccord}"
							value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.CREERCOMPTE']}"
							title="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.CREERCOMPTE']}" />
					</h:form>
				</rich:panel>
				<rich:panel rendered="#{empty centreController.centreEntreprise}">
					<f:facet name="header">
						<h:outputText value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.CENTRE']}" />
					</f:facet>
					<h:panelGrid columns="4">
						<h:panelGrid>
							<h:graphicImage alt="#{msgs['GENERAL.WARNING']}"
								value="../../media/images/help32.png" />
						</h:panelGrid>
						<h:panelGrid>
							<h:form>
								<h:panelGrid columns="1" style="color:red;">
									<h:outputText
										value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.CENTREACREER']}" />
								</h:panelGrid>
							</h:form>
						</h:panelGrid>
						<h:panelGrid columns="3" style="text-align:center;">
							<rich:spacer width="25px" />
							<rich:spacer width="2px"
								style="background-color: #{a4jSkin.panelBorderColor};"
								height="125px" />
							<rich:spacer width="25px" />
						</h:panelGrid>
						<h:panelGrid columns="1" style="text-align:center;">
							<h:outputText value="#{msgs['GENERAL.ACCUEIL.ENTREPRISE.ADMIN']}" />
							<h:form>
								<t:div
									rendered="#{sessionController.adminAuthentication == 'cas'}">
									<h:outputLink value="../../auth/cas/auth.faces">
										<h:graphicImage value="../../media/images/cas-login.png"
											style="border:none;padding-right:2px;" />
									</h:outputLink>
								</t:div>
								<t:div
									rendered="#{sessionController.adminAuthentication == 'shibb'}">
									<h:outputLink value="../../auth/shibb/auth.faces">
										<h:graphicImage
											value="../../media/images/shibboleth-login.png"
											style="border:none;padding-right:2px;" />
									</h:outputLink>
								</t:div>
							</h:form>
						</h:panelGrid>
					</h:panelGrid>
				</rich:panel>
				<rich:spacer height="15px" />
				<h:outputText value="#{msgs['MESSAGE_CNIL_ENTREPRISE']}"
					escape="false"
					rendered="#{not empty msgs['MESSAGE_CNIL_ENTREPRISE']}" />
			</h:panelGrid>
		</t:div>
		<t:div
			rendered="#{sessionController.pageAuthorized or sessionController.adminPageAuthorized}">
			<h:panelGrid style="float:left;">
				<ui:include src="./_menu.jsp" />
			</h:panelGrid>
			<h:panelGrid columns="1" styleClass="panelEntreprise">
				<rich:panel>
					<f:facet name="header">
						<h:outputText value="#{msgs['MENU.ACCUEIL']}" />
					</f:facet>
					<ui:include src="_aide.jsp" />
				</rich:panel>
				<ui:include src="_panelNousContacter.jsp" />
			</h:panelGrid>
		</t:div>
	</ui:define>
</ui:composition>

