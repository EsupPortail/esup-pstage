<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:t="http://myfaces.apache.org/tomahawk"
                xmlns:p="http://primefaces.org/ui" template="../_basicTemplate.xhtml">
    <ui:define name="content">
        <h:panelGrid style="float:left;">
            <ui:include src="./_menu.xhtml" />
        </h:panelGrid>
        <h:panelGrid>
            <p:panel>
                <f:facet name="header">
                    <h:outputText value="#{msgs['RECHERCHEOFFRE.TITRE']}" />
                </f:facet>
                <h:form id="formRechOffre">
                    <t:div
                            rendered="#{not empty offreController.rechercheOffrePaginator.visibleItems}">
                        <ui:include src="../_commun/_rechercheOffreNbResultats.xhtml" />
                        <p:dataTable id="listeOffres"
                                     value="#{offreController.rechercheOffrePaginator.visibleItems}"
                                     var="offre" rows="10" rowKey="rowOffre" rowHover="true"
                                     rowStyleClass="noPointer" paginator="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,15,20">
                            <ui:include
                                    src="../_commun/_rechercheOffreResultatsColumns.xhtml" />
                            <p:column>
                                <h:commandLink id="recap"
                                               action="#{offreController.goToRecapitulatifOffreFromOffreLight}">
                                    <h:graphicImage alt="#{msgs['OFFRE.GESTION.DETAILS']}"
                                                    value="../../media/images/document.png" />
                                    <f:setPropertyActionListener value="#{offre}"
                                                                 target="#{offreController.currentOffre}" />
                                    <p:tooltip value="#{msgs['OFFRE.GESTION.DETAILS']}" />
                                </h:commandLink>
                                <h:commandLink id="modif"
                                               action="#{offreController.goToModificationOffreEtab}">
                                    <h:graphicImage alt="#{msgs['FORM.MODIFIER']}"
                                                    value="../../media/images/edit.png" />
                                    <f:setPropertyActionListener value="resultatsRechercheOffre"
                                                                 target="#{offreController.retour}" />
                                    <f:setPropertyActionListener value="#{offre}"
                                                                 target="#{offreController.currentOffre}" />
                                    <f:setPropertyActionListener value="#{2}"
                                                                 target="#{offreController.typeAjoutModifOffre}" />
                                    <f:setPropertyActionListener value="#{false}"
                                                                 target="#{etablissementController.afficherSelectionCentreContact}" />
                                    <f:setPropertyActionListener value="_modificationOffreEtape04DetailsEtab"
                                                                 target="#{sessionController.modificationOffreCurrentPage}" />
                                    <p:tooltip>
                                        <h:panelGrid>
                                            <h:outputLabel for="modif" value="#{msgs['FORM.MODIFIER']}" />
                                            <t:div rendered="#{sessionController.adminPageAuthorized}">
                                                <t:htmlTag value="br" />
                                                <t:aliasBean alias="#{objet}" value="#{offre}">
                                                    <ui:include src="../_commun/_updateInfos.xhtml" />
                                                </t:aliasBean>
                                            </t:div>
                                        </h:panelGrid>
                                    </p:tooltip>
                                </h:commandLink>
                                <p:commandLink  id="suppr" update="supprOffre"
                                                oncomplete="PF('supprOffre').show();">
                                    <h:graphicImage alt="#{msgs['FORM.SUPPRIMER']}"
                                                    value="../../media/images/delete.png" />
                                    <f:setPropertyActionListener value="resultatsRechercheOffre"
                                                                 target="#{offreController.retour}" />
                                    <f:setPropertyActionListener value="_supprOffreEtape1"
                                                                 target="#{sessionController.suppressionOffreCurrentPage}" />
                                    <f:setPropertyActionListener value="#{offre}"
                                                                 target="#{offreController.currentOffre}" />
                                    <p:tooltip value="#{msgs['FORM.SUPPRIMER']}" />
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </t:div>
                    <h:panelGrid>
                        <t:htmlTag value="div" style="height:20px;" />
                        <h:commandButton
                                value="#{msgs['RECHERCHEOFFRE.NOUVELLERECHERCHER']}"
                                action="#{offreController.goToRechercheOffre}" />
                    </h:panelGrid>
                </h:form>
                <ui:include src="../_commun/_panelSupprOffre.xhtml" />
            </p:panel>
            <ui:include src="_panelNousContacter.xhtml" />
        </h:panelGrid>
    </ui:define>
</ui:composition>