<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui">
	<t:aliasBean alias="#{structure}"
		value="#{rechercheController.resultatRechercheStructure}">
        <t:htmlTag value="i" styleClass="fa fa-building fz16 fontBlue2"/>
        <h:outputText value="#{msgs['STRUCTURE.INFOS']}" styleClass="fontBold fontBlue2 fz16 ml5" escape="false"/>
		<ui:include src="/stylesheets/_commun/_rechercheEtablissementAffichage.xhtml" />
	</t:aliasBean>
	<p:outputPanel id="opAffAccord" ajaxRendered="true">
		<p:toolbar height="26" itemSeparator="none">
            <t:htmlTag value="i" styleClass="fa fa-building fz16 fontBlue2"/>
            <h:outputText value="#{msgs['STRUCTURE.INFOS']}" styleClass="fontBold fontBlue2 fz16 ml5" escape="false"/>
			<ui:include
				src="/stylesheets/_commun/_rechercheEtablissementResultatUniqueToolBar.xhtml" />
		</p:toolbar>

		<t:htmlTag value="div" style="height:5px;" />

		<h:panelGrid columns="5"
			rendered="#{sessionController.adminPageAuthorized and 
				not empty rechercheController.ongletCourant 
				and rechercheController.ongletCourant==6
				and not empty rechercheController.resultatRechercheStructure.accordPartenariat}">
			<h:outputText value="#{msgs['ACCORD.DATECREATION']}" escape="false" />
			<h:outputText
				value="#{rechercheController.resultatRechercheStructure.accordPartenariat.dateCreation}">
				<f:convertDateTime pattern="dd MMM yyyy" timeZone="CET" />
			</h:outputText>
			<h:outputText value="#{msgs['ACCORD.DATEVALIDATION']}" escape="false"
				rendered="#{rechercheController.resultatRechercheStructure.accordPartenariat.estValide}" />
			<h:outputText
				value="#{rechercheController.resultatRechercheStructure.accordPartenariat.dateValidation}"
				rendered="#{rechercheController.resultatRechercheStructure.accordPartenariat.estValide}">
				<f:convertDateTime pattern="dd MMM yyyy" timeZone="CET" />
			</h:outputText>
			<h:outputText value="#{msgs['GENERAL.UPDATEINFOS.PAR']}"
				rendered="#{rechercheController.resultatRechercheStructure.accordPartenariat.estValide}" />
			<h:outputText
				value="#{rechercheController.resultatRechercheStructure.accordPartenariat.loginValidation}"
				rendered="#{rechercheController.resultatRechercheStructure.accordPartenariat.estValide}" />
		</h:panelGrid>

		<t:htmlTag value="div" style="height:5px;" />

		<p:toolbar height="26" itemSeparator="none">
			<h:panelGrid columns="4"
				rendered="#{sessionController.adminPageAuthorized
			and not empty rechercheController.resultatRechercheStructure.accordPartenariat}">
				<h:commandLink id="validerAccord"
					action="#{adminController.goToValidationAccord}"
					rendered="#{not rechercheController.resultatRechercheStructure.accordPartenariat.estValide}">
					<h:graphicImage alt="#{msgs['FORM.VALIDER']}"
						title="#{msgs['FORM.VALIDER']}"
						value="../../media/images/tick.png" />
					<f:setPropertyActionListener
						value="#{rechercheController.resultatRechercheStructure}"
						target="#{adminController.structureAccordAValider}" />
					<h:outputText value="#{msgs['FORM.VALIDER']}" />
				</h:commandLink>
				<h:commandLink id="consulterAccord"
					action="#{adminController.goToConsulterAccord}"
					rendered="#{rechercheController.resultatRechercheStructure.accordPartenariat.estValide}">
					<h:graphicImage alt="#{msgs['ACCORD.CONSULTATION.BUTTON']}"
						title="#{msgs['ACCORD.CONSULTATION.BUTTON']}"
						value="../../media/images/see.png" />
					<f:setPropertyActionListener
						value="#{rechercheController.resultatRechercheStructure}"
						target="#{adminController.structureAccord}" />
					<h:outputText value="#{msgs['ACCORD.CONSULTATION.BUTTON']}" />
				</h:commandLink>
				<t:htmlTag value="div" style="width:10px;" />
				<p:commandLink id="supprimerAccord"
					oncomplete="PF('supprimerAccordPanel').show();"
					update="supprimerAccordPanel">
					<h:graphicImage alt="#{msgs['ACCORD.SUPPRESSION.BUTTON']}"
						title="#{msgs['ACCORD.SUPPRESSION.BUTTON']}"
						value="../../media/images/see_block.png" />
					<h:outputText value="#{msgs['ACCORD.SUPPRESSION.BUTTON']}" />
					<f:setPropertyActionListener
						value="#{rechercheController.resultatRechercheStructure}"
						target="#{adminController.accordASupprimer}" />
					<f:setPropertyActionListener value="_supprAccordEtape1"
						target="#{sessionController.suppressionAccordCurrentPage}" />
				</p:commandLink>
			</h:panelGrid>
		</p:toolbar>
	</p:outputPanel>
</ui:composition>